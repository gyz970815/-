!function(e,t,n){t.MGTOOL={},e.extend(MGTOOL,{byteLength:function(e){var t=e.match(/[^\x00-\x80]/g);return e.length+(t?t.length:0)},jsMbSubstr:function(e,t){if(!e||!t)return"";var n=0,o=0,r="",i=e.length;for(o=0;i>o;o++){if(n=e.charCodeAt(o)>255?n+=2:++n,n>2*t)return r;r+=e.charAt(o)}return e},formatMoney:function(e,t,n){if(t=MGTOOL.empty(e)?"2":t,MGTOOL.empty(n))return e.toFixed(t);var o=0>e?"-":"",r=parseInt(e=Math.abs(+e||0).toFixed(t),10)+"",i=(i=r.length)>3?i%3:0;return o+(i?r.substr(0,i)+n:"")+r.substr(i).replace(/(\d{3})(?=\d)/g,"$1"+n)+(t?"."+Math.abs(e-r).toFixed(t).slice(2):"")}}),e.extend(MGTOOL,{emptyObj:function(e){for(var t in e)return!1;return!0},empty:function(e){return null==e||0===e.length},objToJson:function(e){return JSON.stringify(e)}}),e.extend(MGTOOL,{setCookie:function(e,t,n){n=n||{},null===t&&(t="",n.expires=-1);var o="";if(n.expires&&("number"==typeof n.expires||n.expires.toUTCString)){var r;"number"==typeof n.expires?(r=new Date,r.setTime(r.getTime()+864e5*n.expires)):r=n.expires,o="; expires="+r.toUTCString()}var i=n.path?"; path="+n.path:"",u=n.secure?"; secure":"",a="";n.domain?a="; domain="+n.domain:(a=document.domain.toString().split("."),a="; domain=."+a[1]+"."+a[2]),document.cookie=[e,"=",encodeURIComponent(t),o,i,a,u].join("")},getCookie:function(e){var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!==t?decodeURIComponent(t[2]):""},removeCookie:function(e){MGTOOL.setCookie(e,null,{expires:-1})},setCacheCookie:function(t,n,o,r){o=o||{},null===n&&(n="");var i="undefined"==typeof r?MGTOOL.getCookie("__mgjuuid"):r;e.ajax({url:"/collect/uedcookie",type:"POST",timeout:6e4,data:{cookiename:t,uuid:i,type:"set",value:n,lifetime:86400*o.expires},dataType:"json",success:function(e){""===e&&alert(MGLANG.msgTimeout)}})},getCacheCookie:function(t,n){var o="undefined"==typeof n?MGTOOL.getCookie("__mgjuuid"):n,r="";return e.ajax({url:"/collect/uedcookie",type:"POST",timeout:6e4,async:!1,data:{cookiename:t,uuid:o,type:"get"},dataType:"json",success:function(e){var t=e.status.code;e.status.msg;if(1001==t){var n=e.result.data.value;r=n}else alert(MGLANG.msgTimeout)}}),r}}),e.extend(MGTOOL,{getQueryString:function(e,t){t="undefined"!=typeof t?t:location.href;var n=new RegExp("(^|\\?|&)"+e+"=([^&]*)(\\s|&|$)","i");return n.test(t)?RegExp.$2.replace(/\+/g," "):""},getPicExtension:function(e){return/(.+)\.(.+)/.exec(e)?RegExp.$2:""},filterDomain:function(e){var t=/http:\/\/[^\/]+/;return e.replace(t,"")}}),e.extend(MGTOOL,{throttleM:{isLoading:!1,throttoleXhr:function(e,t){var n=this;if(!n.isLoading){t=t||500,n.isLoading=!0;var o=e();o.complete=function(){setTimeout(function(){n.isLoading=!1},t)}}}}}),e.extend(MGTOOL,{getMsgLength:function(e){var t=e.length;if(t>0){for(var n=41,o=140,r=24,i=e,u=e.match(/http[s]?:\/\/[a-zA-Z0-9-]+(\.[a-zA-Z0-9]+)+([-A-Z0-9a-z_\$\.\+\!\*\(\)\/\/,:;@&=\?\~\#\%]*)*/gi)||[],a=0,s=0,c=u.length;c>s;s++){var g=MGTOOL.byteLength(u[s]);/^(http:\/\/mogujie.cn)/.test(u[s])||(a+=/^(http:\/\/)+(mogujie.cn|mogujie.com)/.test(u[s])&&n>=g?g:o>=g?r:g-o+r,i=i.replace(u[s],""))}return Math.ceil((a+MGTOOL.byteLength(i))/2)}return 0},getAbsoluteLocation:function(n){if(1!==arguments.length||null===n)return null;var o=e(n),r=o.offset(),i=r.top,u=r.left,a=o.height(),s=e(t).height(),c=e(document).scrollTop(),g=i>=c&&c+s>=i,l=i+a+200>=c&&c+s>=i-400;return{absoluteTop:i,absoluteLeft:u,isInView:g,isLoad:l}},distance2Bottom:function(n){var o=e(document),r=e(t),i=o.scrollTop(),u=r.height(),a=o.height();return i+u+n>=a},isParent:function(e,t){for(;e!==n&&null!==e&&"BODY"!=e.tagName.toUpperCase();){if(e==t)return!0;e=e.parentNode}return!1},template:function(e,t){return doT.template(e)(t)},log:function(e){t.console!==n&&console.log(e)},dataFormat:function(e,t){var n={"M+":e.getMonth()+1,"d+":e.getDate(),"h+":e.getHours(),"m+":e.getMinutes(),"s+":e.getSeconds(),"q+":Math.floor((e.getMonth()+3)/3),S:e.getMilliseconds()};/(y+)/.test(t)&&(t=t.replace(RegExp.$1,(e.getFullYear()+"").substr(4-RegExp.$1.length)));for(var o in n)new RegExp("("+o+")").test(t)&&(t=t.replace(RegExp.$1,1==RegExp.$1.length?n[o]:("00"+n[o]).substr((""+n[o]).length)));return t}}),e.extend(MGTOOL,{trim:function(t){return e.trim(t)},getRequest:function(e,t){return this.getQueryString(e,t)}})}(jQuery,window);var MOGU=MOGU||{};!function(t){MOGU.Globe_Textarea_Auto_Height=function(e){var o=e.height(),i=function(){0>o&&(o=e.height()),(t.browser.mozilla||t.browser.safari)&&e.height(o);var i=e[0].scrollHeight,n=o>i?o:i;n=1.5*o>n?o:i,e.height(n)};e.bind("keyup",i).bind("input",i).bind("propertychange",i).bind("focus",i)},MOGU.Globe_Goods_URL_Support=function(t){var e=/item(.[\w]+)?.taobao.com\/(.?)[item.htm|item_num_id|item_detail|itemID|item_id|default_item_id]/i,o=/detail.tmall/i,i=/auction\d?.paipai.com/i,n=/buy.caomeipai.com\/goods/i,a=/www.360buy.com\/product/i,c=/product.dangdang.com\/Product.aspx\?product_id=/i,r=/book.360buy.com/i,s=/www.vancl.com\/StyleDetail/i,u=/www.vancl.com\/Product/i,l=/vt.vancl.com\/item/i,d=/item.vancl.com\/\d+/i,m=/item.vt.vancl.com\/\d+/i,w=/(mbaobao.com\/pshow)|(mbaobao.com\/item)/i,f=/item.buy.qq.com\/item/i,_=/[www|us].topshop.com\/webapp\/wcs\/stores\/servlet\/ProductDisplay/i,b=/quwan.com\/goods/i,h=/nala.com.cn\/product/i,p=/maymay.cn\/pitem/i,v=/asos.com/i,g=/www.100f1.com\/ProductInfo_/i,y=/www.gaojie.com\/product/i,G=/a.m.taobao.com\/i/i,O=/www.51yugou.com\//i,M=/www.1mall.com\//i,U=/www.yihaodian.com\//i,k=/www.xipin.me\//i,j=/www.nuandao.com\//i,x=/www.rosebeauty.com.cn\//i,L=/www.hmeili.com\//i,T=/www.yueji.com\//i,C=/www.yougou.com\//i,S=/cn.shopbop.com\//i,I=/item.jd.com\//i,P=/[www|shop].mogujie.com(.*)\/detail/i;return e.test(t)||o.test(t)||r.test(t)||a.test(t)||i.test(t)||n.test(t)||c.test(t)||s.test(t)||u.test(t)||l.test(t)||d.test(t)||m.test(t)||w.test(t)||_.test(t)||b.test(t)||h.test(t)||p.test(t)||v.test(t)||g.test(t)||y.test(t)||f.test(t)||G.test(t)||O.test(t)||U.test(t)||k.test(t)||j.test(t)||x.test(t)||L.test(t)||T.test(t)||C.test(t)||M.test(t)||S.test(t)||I.test(t)||P.test(t)},MOGU.Globe_Input_Text=function(e,o){o=o||e.val(),e.focus(function(){var e=t(this);t.trim(e.val())==o&&e.val(""),e.css("color","#000")}),e.blur(function(){var e=t(this);""==t.trim(e.val())&&(e.val(o),e.css("color","#ccc"))})},MOGU.Globe_Input_Text_Hide=function(e){e.focus(function(){var e=t(this);t.trim(e.val())==t.trim(e.attr("def-v"))&&e.val(""),e.css("color","#000")}),e.blur(function(){var e=t(this);""==t.trim(e.val())&&(e.val(e.attr("def-v")),e.css("color","#ccc"))})},MOGU.WB_Word_Count=function(e,o,i){var n=i?i:140;if(t("#"+e)[0]){var a=function(){var i=0;i=o?MGTOOL.getMsgLength(t("#"+o).val()):MGTOOL.getMsgLength(t("#"+e).find(".pub_txt").val());var a=n-i;0==i?t("#"+e).find(".word_count").html(n):i>n?(t("#"+e).find(".word_count_wrap").html('\u60a8\u5df2\u8d85\u8fc7<em class="word_count"></em>\u4e2a\u5b57').find(".word_count").html(Math.abs(a)),t("#"+e).find(".word_count_wrap").show(),t("#"+e).find(".word_count").addClass("out")):(t("#"+e).find(".word_count_wrap").html('\u8fd8\u53ef\u4ee5\u8f93\u5165<em class="word_count"></em>\u4e2a\u5b57').find(".word_count").html(a),t("#"+e).find(".word_count").removeClass("out"))};o?t("#"+o).bind("keyup",a).bind("input",a).bind("propertychange",a):t("#"+e).find(".pub_txt").bind("keyup",a).bind("input",a).bind("propertychange",a)}},MOGU.Globe_Range_Input=function(t){if(t[0].createTextRange){var e=t[0].createTextRange();e.moveEnd("character",t.val().length),e.moveStart("character",t.val().length),e.select()}else t[0].setSelectionRange(t.val().length,t.val().length),t.focus()},MOGU.Globe_Check_Login=function(){return""==MOGUPROFILE.userid?(MOGU.user_handsome_login_init(),MOGU.user_handsome_login(),!1):!0},MOGU.Globe_Short_Link_From=function(){t(".mg_slink").live("click",function(){var e=window.location.toString();if(!(e.indexOf("is_qzone=1")>=0)){var o=this,i=o.href,n=t(o).attr("s"),a=t(o).attr("c");""==a&&(a=MOGUPROFILE.userid);var c=i,r="";r=-1==i.indexOf("?")?"?c="+a+"&s="+n:"&c="+a+"&s="+n,c+=r,o.href=c,setTimeout(function(){o.href=i},500)}})},MOGU.Globe_Short_Link_From(),MOGU.Globe_Bind_Keybord_Submit=function(e,o,i){i=i||"need_focus","need_focus"==i&&(e.focus(function(){t("body").unbind("keydown"),t("body").bind("keydown",function(t){t.ctrlKey&&13==t.keyCode&&o.click()})}),e.blur(function(){t("body").unbind("keydown")})),"not_need_focus"==i&&t(document).bind("keydown",function(e){e.ctrlKey&&13==e.keyCode&&(o.click(),t("body").unbind("keydown"))})},MOGU.GLobe_GetObj_Length=function(t){var e,o=0;for(e in t)t.hasOwnProperty(e)&&o++;return o},MOGU.Empty_Message_Tip=function(t){var e=t?t:{},o=e.pub_obj,i=null,n=0;i=setInterval(function(){n++,6==n?(clearInterval(i),o.focus()):n%2==0?o.addClass("empty_tip"):o.removeClass("empty_tip")},120)},MOGU.Defult_Post_data=function(e){if(e instanceof jQuery||(e=t(e)),e.hasClass("disable"))return!1;e.addClass("disable");var o=e.data(),i=o.url||"";if(""!==i){var n=function(t){1001===t.status.code?window.location.reload():alert(t.status.msg)};jQuery.ajax({url:i,type:"POST",dataType:"json",data:o,complete:function(){e.removeClass("disable")},success:function(t){n(t)}})}},MOGU.Globe_Trace_Log=function(t){},t.fn.serializeObject=function(){var e={},o=this.serializeArray();return t.each(o,function(){void 0!==e[this.name]?(e[this.name].push||(e[this.name]=[e[this.name]]),e[this.name].push(this.value||"")):e[this.name]=this.value||""}),e},MOGU.SerializeFormObject=function(t){t.serializeObject()}}(jQuery),$(function(){$(document).off("click",".__trace__").on("click",".__trace__",function(t){var e=$(this).attr("data-trace");e&&MOGU.Globe_Trace_Log(e)})}),function(){for(var t,e=function(){},o=["assert","clear","count","debug","dir","dirxml","error","exception","group","groupCollapsed","groupEnd","info","log","markTimeline","profile","profileEnd","table","time","timeEnd","timeStamp","trace","warn"],i=o.length,n=window.console=window.console||{};i--;)t=o[i],n[t]||(n[t]=e)}();!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("pc/common/im/index",[],e):"object"==typeof exports?exports["pc/common/im/index"]=e():t["pc/common/im/index"]=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";var o=n(1),i={},a=function(t,e){return $.ajax({url:"//webim.mogujie.com/jsonp/getshopowner/1",data:{shopId:t},type:"GET",dataType:"jsonp",jsonp:"callback",success:e})},r=function(t,e){o(t,e);var n=window.$?window.$("#J-imContainer"):document.getElementById("J-imContainer");n.show(),n.contents().focus()},d=function(t,e,n){var o=/com\/detail\/(1[a-z0-9]+)/,d=decodeURIComponent(location.href).match(o);return d&&d[1]&&(n=d[1]),!t&&e?i[e]?(t=i[e],void r(t,n)):void a(e,function(o){o.success&&o.data&&(t=o.data.userId,i[e]=t,r(t,n))}):void r(t,n)},c=function(t,e,n){var o=window.M||{},i=window.MoGu||{},a=window.MOGU||null;if(o.getUserInfo)o.getUserInfo().then(function(o){d(t,e,n)})["catch"](function(){location.href="https://portal.mogujie.com/user/login?redirect_url="+encodeURIComponent(location.href)});else if(!i.data||!i.data.userData||!i.data.userData.uid)return a&&a.user_handsome_login_init?(a.user_handsome_login_init(),void a.user_handsome_login(!1,{callback:function(){location.reload()}})):void(location.href="http://portal.mogujie.com/user/login?redirect_url="+encodeURIComponent(location.href));d(t,e,n)};$(document).ready(function(){$(".mogutalk_widget_btn").each(function(){var t=$(this).data("style")||"default";t&&$(this).addClass("mogutalk_"+t)})}),$(document).on("click",".mogutalk_widget_btn, .mogutalk_btn",function(t){t.preventDefault();var e=t.currentTarget,n=$(e).data("toid")||$(e).data("uid")||"",o=$(e).data("bid")||"",i=$(e).data("tid")||$(e).data("gid")||"";o&&(o=o.replace(/#\d*$/,"")),c(n,o,i)}),window._openIm=c,t.exports=c},function(t,e,n){"use strict";n(2);var o=null,i={getPos:function(){var t=void 0;return o?o:window.localStorage&&(t=window.localStorage.getItem("IM_POSITION"))?JSON.parse(t):{x:$(window).width()-590,y:$(window).height()-440}},setPos:function(t,e){return o={x:t,y:e},window.localStorage&&window.localStorage.setItem("IM_POSITION",JSON.stringify(o)),!0}};t.exports=function(t,e){var n="http://webim.mogujie.com/pc";if(!$("#J-imContainer").length){var o="left:"+i.getPos().x+"px; top:"+i.getPos().y+"px",a='<div id="J-imContainer" class="im-frame-container" style="'+o+'">\n        <div id="J-closeImFrameBtn" class="im-frame-btn"></div>\n        <div id="J-dragImHandle" class="im-frame-drag"></div>\n        <iframe id="J-openImFrame" class="im-frame-box" frameborder="no" allowtransparency="true">\n        </iframe>\n      </div>';$("body").append(a),$("#J-closeImFrameBtn").on("click",function(){$("#J-imContainer").hide()}),$("#J-imContainer").drag({midX:40,midY:40,handler:"#J-dragImHandle",resize:function(t){i.setPos(t.x,t.y)},dragEnd:function(t){i.setPos(t.x,t.y)}})}$("#J-openImFrame").attr("src",n+"#userId="+t+"&goodsId="+e)}},function(t,e){"use strict";var n=!!("ontouchstart"in document.documentElement),o={start:"touchstart",move:"touchmove",end:"touchend"},i={start:"mousedown",move:"mousemove",end:"mouseup"},a=n?o:i;$.fn.drag=function(t){function e(){return h?(x.off(a.start,h),this):this}function o(){u=v.maxX>0?v.maxX:$(window).width(),s=v.maxY>0?v.maxY:$(window).height(),u=u-i("width")-v.midX,s=s-i("height")-v.midY,m=v.midX,l=v.midY}function i(t,e){return e?void p.css(t,e):parseFloat(p.css(t))}function r(){g.x=i("left"),g.y=i("top")}function d(t,e){u&&(m>t?t=m:t>=m&&t>u&&(t=u)),s&&(l>e?e=l:e>=l&&e>s&&(e=s)),"x"===v.axis?i("left",t+"px"):"y"===v.axis?i("top",e+"px"):(i("left",t+"px"),i("top",e+"px")),r()}function c(){function t(t){function e(e){var o,i,a,c;n?1===t.touches.length&&(o=e.touches[0].clientX-t.touches[0].clientX,i=e.touches[0].clientY-t.touches[0].clientY):(o=e.clientX-t.clientX,i=e.clientY-t.clientY),a=u+o,c=s+i,d(a,c),r(e)}function o(){"function"==typeof v.dragEnd&&v.dragEnd.call(this,g),c()}function r(t){t.preventDefault?(t.preventDefault(),t.stopPropagation()):(t.returnValue=!1,t.cancelBubble=!0)}function c(){$(document).off(a.move,e),$(document).off(a.end,o),$(document).off("selectstart",r),x.off("dragstart",r)}var u=i("left")||0,s=i("top")||0;document.body.focus(),$(document).on("selectstart",r),x.on("dragstart",r),$(document).on(a.move,e),$(document).on(a.end,o)}e(),o(),"function"==typeof v.dragStart&&v.dragStart.call(this,g),x.on(a.start,t)}var u,s,m,l,f,p=$(this),h=null,g={},w={midX:0,midY:0,axis:"both",handler:null},v=$.extend({},w,t),x=v.handler;"string"==typeof x?x=p.find(x):x||(x=p),$(window).resize(function(){var t=this;f&&window.clearTimeout(f),f=setTimeout(function(){o(),d(g.x,g.y),"function"==typeof v.resize&&v.resize.call(t,g)},300)}),c()}}])}),"function"==typeof define&&define.amd&&require(["pc/common/im/index"]);function Target(e,t,n){var s="";if(arguments.length<2?s="target error - target and name are both required":"object"!=typeof e?s="target error - target itself must be window object":"string"!=typeof t&&(s="target error - target name must be string type"),s)throw new Error(s);this.target=e,this.name=t,this.prefix=n}function Messenger(e,t){this.targets={},this.name=e,this.listenFunc=[],this.prefix=t||prefix,this.initListen()}var prefix="[PROJECT_NAME]",supportPostMessage="postMessage"in window;supportPostMessage?Target.prototype.send=function(e){this.target.postMessage(this.prefix+"|"+this.name+"__Messenger__"+e,"*")}:Target.prototype.send=function(e){var t=window.navigator[this.prefix+this.name];if("function"!=typeof t)throw new Error("target callback function is not defined");t(this.prefix+e,window)},Messenger.prototype.addTarget=function(e,t){var n=new Target(e,t,this.prefix);this.targets[t]=n},Messenger.prototype.initListen=function(){var e=this,t=function(t){"object"==typeof t&&t.data&&(t=t.data);for(var n=t.split("__Messenger__"),t=n[1],s=n[0].split("|"),r=s[0],i=s[1],a=0;a<e.listenFunc.length;a++)r+i===e.prefix+e.name&&e.listenFunc[a](t)};supportPostMessage?"addEventListener"in document?window.addEventListener("message",t,!1):"attachEvent"in document&&window.attachEvent("onmessage",t):window.navigator[this.prefix+this.name]=t},Messenger.prototype.listen=function(e){for(var t=0,n=this.listenFunc.length,s=!1;n>t;t++)if(this.listenFunc[t]==e){s=!0;break}s||this.listenFunc.push(e)},Messenger.prototype.clear=function(){this.listenFunc=[]},Messenger.prototype.send=function(e){var t,n=this.targets;for(t in n)n.hasOwnProperty(t)&&n[t].send(e)};var messenger;window.parent!==window.self?(messenger=new Messenger("im","ImFrame"),messenger.addTarget(window.parent,"Parent")):messenger=new Messenger("Parent","ImFrame");var newcinfo=function(e,t,n){if(n){var s=this;return this.url=window.location.protocol+"//webim.mogujie.com/jsonp/cinfo/1",this.IDLE=!0,this.trigger=function(e,s){n(t).trigger(e,s)},this.getData=function(e){if(s.IDLE){s.IDLE=!1;var t=0;n.ajax({url:s.url,data:e||{},dataType:"jsonp",timeout:9e3,success:function(e){e&&e.success&&e.data>0&&(t=e.data)},complete:function(){s.IDLE=!0,s.trigger("hasUnread",t)}})}},messenger.listen(function(e){try{switch(e=JSON.parse(e),e.code){case 1007:break;case 1008:s.getData()}}catch(t){}}),{refresh:function(e){var t=window.M||{},n=window.MoGu||{};t.getUserInfo?t.getUserInfo().then(function(){s.getData(e)})["catch"](function(){}):n.data&&n.data.userData&&n.data.userData.uid&&s.getData(e)}}}}(window,document,jQuery);!function(t){MOGU.imgCodeCheck=function(){var a=!1,i=t(".img_code_spin");if(0==i.length)return a=!0;for(var c=0;c<i.length;c++){var e=t(i[c]);if(0!=e.val()){a=!0;break}}return a},MOGU.imgCaptchaInit=function(){var a=t(".imgcheck_image_div"),i=t("#imgcheck_code_change"),c=function(t,a){var i=-75*((a+1)%4),c=t[0].style.backgroundPosition.split(" ");t[0].style.backgroundPosition=c[0]+" "+i+"px"};a.click(function(){var a=t(this).attr("f"),i=t("#img_code_spin_"+a),e=parseInt(i.val());c(t(this),e),i.val(e+1)}),i.click(function(){MOGU.imgCaptchaRecaptcha()})},MOGU.imgCaptchaRecaptcha=function(a){var i=function(a){for(var i=t(".imgcheck_image_div"),c=i.length,e=0;c>e;e++){var n=i[e],o=n.getAttribute("f"),r=t("#img_code_spin_"+o);r.val(0);var u=t(n);u.css("background-image","url(/captchaimg/"+a+")"),u.css({"background-position":-75*e+"px 0"})}};void 0===a?t.ajax({url:"/reimgcaptcha",type:"POST",timeout:6e4,data:{},dataType:"json",cache:!1,success:function(t){var a=t.status.code;t.status.msg;if(1001==a){var c=t.result.data.captchaId;i(c)}},error:function(t,a,i){"timeout"==a&&alert(MGLANG.msgTimeout)}}):setTimeout(function(){i(a)},1)},MOGU.imgCaptchaInit()}(jQuery);!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("core/core")):"function"==typeof define&&define.amd?define("pc/common/nav/index",["core/core"],e):"object"==typeof exports?exports["pc/common/nav/index"]=e(require("core/core")):t["pc/common/nav/index"]=e(t["core/core"])}(this,function(t){return function(t){function e(a){if(o[a])return o[a].exports;var i=o[a]={exports:{},id:a,loaded:!1};return t[a].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var o={};return e.m=t,e.c=o,e.p="",e(0)}([function(t,e,o){"use strict";o(1),o(3),o(5),o(6)},function(t,e,o){var a,i;a=[o(2)],i=function(){function t(t,e,o){function a(){var e=i.shift();e&&t.apply(e.context,e.arguments),0===i.length&&(clearInterval(n),n=null)}var i=[],n=null;return function(){i.push({context:o||this,arguments:[].slice.call(arguments)}),n||(a(),n=setInterval(a,e))}}function e(t,e,o){return parseInt(t+"",0|e).toString(0|o)}function o(){var t=$(".J_sitenav .wrap"),e=['<a href="http://www.mogujie.com" rel="nofollow" class="home fl">\u8611\u83c7\u8857\u9996\u9875</a>','<ul class="header_top">',"{{? it.name}}",'<li class="s1 has_icon user_meta">','<a rel="nofollow" href="javascript:;">',"{{=it.name}}","</a>",'<a rel="nofollow" href="http://www.mogujie.com/member" target="_blank">',"{{?it.userLevel}}",'<span class="level level',"{{=it.userLevel - 1}}",'">&nbsp;</span>',"{{?}}","</a>",'<i class="icon_delta"></i>','<ol class="ext_mode" id="menu_personal">','<li class="s2">','<a target="_blank" rel="nofollow" href="http://www.mogujie.com/settings/personal">\u4e2a\u4eba\u8bbe\u7f6e</a>',"</li>",'<li class="s2">','<a target="_blank" rel="nofollow" href="http://www.mogujie.com/settings/bind">\u8d26\u53f7\u7ed1\u5b9a</a>',"</li>",'<li class="s2">','<a rel="nofollow" href="//www.mogujie.com/logout">\u9000\u51fa</a>',"</li>","</ol>","</li>",'<li class="s1 has_line message_center">','<a rel="nofollow" href="javascript:;" class="ext_module mogutalk_btn J_msg open_msg micon" data-from="shopwidget_message" data-trace="global,shopwidget_message,click">','\u6d88\u606f<span class="num m_num"></span>',"</a>","</li>",'<li class="s1 has_icon has_line user_fav">','<a rel="nofollow" href="javascript:;">\u6211\u7684\u6536\u85cf</a>','<i class="icon_delta"></i>','<ul class="ext_mode">','<li class="s2">','<a target="_blank" rel="nofollow" href="http://favorite.mogujie.com/active/goodsfavs">\u6536\u85cf\u7684\u5546\u54c1</a>',"</li>",'<li class="s2">','<a target="_blank" rel="nofollow" href="http://favorite.mogujie.com/active/shopfavs">\u6536\u85cf\u7684\u5c0f\u5e97</a>',"</li>",'<li class="s2">','<a target="_blank" rel="nofollow" href="http://track.mogujie.com">\u6d4f\u89c8\u8db3\u8ff9</a>',"</li>","</ul>","</li>","{{??}}",'<li class="s1 show-nologin">','<a rel="nofollow" href="http://portal.mogujie.com/user/register">\u6ce8\u518c</a>',"</li>",'<li class="s1 show-nologin">','<a rel="nofollow" href="http://portal.mogujie.com/user/login">\u767b\u5f55</a>',"</li>","{{?}}",'<li class="s1 myorder has_line">','<a href="http://order.mogujie.com/order/list4buyer" target="_blank" class="text display_u" rel="nofollow">\u6211\u7684\u8ba2\u5355</a>',"</li>",'<li class="s1 has_line shopping_cart_v2">','<a class="cart_info_wrap" href="http://cart.mogujie.com/cart/mycart" target="_blank" rel="nofollow">','<span class="cart_info">\u8d2d\u7269\u8f66</span>',"</a>",'<i class="icon_delta"></i>','<span class="shopping_cart_loading"></span>',"</li>",'<li class="s1 has_line has_icon custom_item">','<a rel="nofollow" href="http://www.mogujie.com/help" rel="nofollow" target="_blank">\u5ba2\u6237\u670d\u52a1</a>','<i class="icon_delta"></i>','<ol class="ext_mode">','<li class="s2"><a target="_blank" rel="nofollow" href="http://www.mogujie.com/help">\u6d88\u8d39\u8005\u670d\u52a1</a></li>','<li class="s2"><a target="_blank" rel="nofollow" href="http://service.xiaodian.com">\u5546\u5bb6\u670d\u52a1</a></li>','<li class="s2"><a target="_blank" rel="nofollow" href="http://www.mogujie.com/rule/index">\u89c4\u5219\u4e2d\u5fc3</a></li>',"</ol>","</li>",'<li class="s1 has_line has_icon myxiaodian">','<a href="http://www.xiaodian.com" rel="nofollow" target="_blank" class="text display_u">\u6211\u7684\u5c0f\u5e97</a>','<i class="icon_delta"></i>','<ol class="ext_mode">','<li class="s2"><a target="_blank" rel="nofollow" href="http://www.xiaodian.com/pc/shopadmin/shopface">\u7ba1\u7406\u540e\u53f0</a></li>','<li class="s2"><a target="_blank" rel="nofollow" href="http://bbs.xiaodian.com">\u5546\u5bb6\u793e\u533a</a></li>','<li class="s2"><a target="_blank" rel="nofollow" href="http://peixun.xiaodian.com">\u5546\u5bb6\u57f9\u8bad</a></li>','<li class="s2"><a target="_blank" rel="nofollow" href="http://www.xiaodian.com/pc/joinmarket">\u5e02\u573a\u5165\u9a7b</a></li>',"</ol>","</li>","</ul>"].join("");n&&n.fn&&n.fn.getUserData&&n.fn.getUserData(function(o,a){o?(a={},t.html(n.ui.getTemplate(e,a)),$("body").trigger("userdatarecieve",[a]),window.newcinfo&&window.newcinfo.refresh()):(t.html(n.ui.getTemplate(e,a)),$("body").trigger("userdatarecieve",[a]),window.newcinfo&&window.newcinfo.refresh()),$&&$.Deferred&&$.Deferred(l).done(function(t){var e="remote";t.degradation&&(e="local"),c.init(e),d.init(e)}).fail(function(){})})}function a(t){t.uname&&t.uname.length>0&&t.shopFaved&&$(".J-shop-follow").addClass("shop-followed").html("\u5df2\u6536\u85cf"),t.jumpUrl&&t.jumpUrl.length>0&&(location.href=t.jumpUrl)}function i(){function t(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),o=window.location.search.substr(1).match(e);return null!=o?unescape(o[2]):null}function e(t,e){var o=new Date;o.setTime(o.getTime()+31536e6),document.cookie=t+"="+escape(e)+";expires="+o.toGMTString()}function o(t){var e,o=new RegExp("(^| )"+t+"=([^;]*)(;|$)");return e==document.cookie.match(o)?unescape(e[2]):null}var a=$("#menu_personal"),i=$(".dapei_tip",a),n=$(".dapei_btn",a);n.click(function(){e("dapei_tip_hidden",!0),i.hide(),setTimeout(function(){a.mouseleave(function(){$(this).removeClass("ext_mode_show")})},1e3)}),null!=t("isDaPeiShi")?a.addClass("ext_mode_show"):"true"==$("#isDaPeiShi").val()&&null==o("dapei_tip_hidden")&&a.addClass("ext_mode_show")}var n=window.MoGu||{};n.fn=n.fn||{},window.log_stat_url_tmp=window.log_stat_url_tmp||"",$.extend(n.fn,{greyTest:function(t,e){$.ajax({url:"http://www.mogujie.com/trade/abtest/service/getBucket",data:{biz:t},type:"get",dataType:"jsonp",success:function(t){$.isFunction(e)&&e(null,t)},fail:function(t){$.isFunction(e)&&e(t)}})},getUserData:t(function(t){if(n.data=n.data||{},n.data.userData)$.isFunction(t)&&t(null,n.data.userData);else{var e=location.protocol||"http:",o={};$.ajax({url:e+"//portal.mogujie.com/api/profile/baseinfo",dataType:"jsonp",type:"get",success:function(e){1001==e.status.code?(o=e.result,n.data.userData=o,$.isFunction(t)&&t(null,o)):(n.data.userData=o,$.isFunction(t)&&t(null,o))},fail:function(e){$.isFunction(t)&&t(e)}})}},100)}),n.fn.id2url=function(t,o){var a="",i=o||1;if(t=""+t,24==t.length)return t;switch(i){case 1:a=i+e(2*t+56,10,36);break;default:a=!1}return a};var s=$(".header_2015"),r=$(".mgj_rightbar"),l=function(t){var e=location.protocol||"http:",o=23784;return $.ajax({url:e+"//mce.mogucdn.com/jsonp/multiget/3",dataType:"jsonp",type:"get",data:{pids:o},jsonpCallback:"jsonp"+o,success:function(e){"SUCCESS"===e.returnCode&&e.data[o]&&e.data[o].list&&e.data[o].list.length&&"true"==e.data[o].list[0].degradation?t.resolve({degradation:!0}):t.resolve({degradation:!1})},fail:function(){t.resolve({degradation:!0})}}),t.promise()},c={getCartListCount:function(t,e){var o=location.protocol||"http:";if(t&&"local"==t){var a=0;if(window.localStorage){var i=window.localStorage.getItem("cache_cart_list_num");i&&i>0&&(a=i)}$.isFunction(e)&&e(null,{result:{count:a},status:{message:"",isLogin:!0,code:1001,msg:""}})}else $.ajax({url:o+"//cart.mogujie.com/api/cart/getItemCount?marketType=market_mogujie",dataType:"jsonp",type:"get",success:function(t){t&&t.status&&"1001"==t.status.code?(t.result&&t.result.count>0&&window.localStorage&&window.localStorage.setItem("cache_cart_list_num",t.result.count),$.isFunction(e)&&e(null,t)):$.isFunction(e)&&e(null,{})},fail:function(t){$.isFunction(e)&&e(t)}})},renderNavCart:function(t){var e=s.find(".shopping_cart_v2");if(e.length)if(t&&t.result&&t.result.count>0){var o=t.result.count>99?"99+":t.result.count,a='<span class="cart_info">\u8d2d\u7269\u8f66<b class="num">'+o+"</b>\u4ef6</span>";e.find(".cart_info_wrap").html(a).show()}else e.find(".cart_info_wrap").html('<span class="cart_info">\u8d2d\u7269\u8f66</span>')},renderSideBarCart:function(t){var e=r.find(".mgj-my-cart");e.length&&(t&&t.result&&t.result.count>0?e.find(".num").html(t.result.count>99?"99+":t.result.count).show():e.find(".num").hide())},init:function(t){var e=this;e.getCartListCount(t,function(t,o){e.renderNavCart(o),e.renderSideBarCart(o)})}},d={getCouponCount:function(t,e){var o=location.protocol||"http:";if(t&&"local"==t){var a=0;if(window.localStorage){var i=window.localStorage.getItem("cache_coupon_num");i&&i>0&&(a=i)}$.isFunction(e)&&e(null,{data:{number:a},returnCode:"SUCCESS",success:!0})}else $.ajax({url:o+"//promotion.mogujie.com/jsonp/getUnUsedCouponNumber/1?domain=8",dataType:"jsonp",type:"get",success:function(t){t&&t.success&&"SUCCESS"==t.returnCode&&(t.data&&t.data.number>0&&window.localStorage&&window.localStorage.setItem("cache_coupon_num",t.data.number),$.isFunction(e)&&e(null,t))},fail:function(t){$.isFunction(e)&&e(t)}})},init:function(t){this.getCouponCount(t,function(t,e){var o=r.find(".mgj-my-coupon");if(o.length)if(e&&e.data&&e.data.number>0){var a=e.data.number,i=parseInt(a,10);i?o.find(".num").html(i>99?"99+":i).show():o.find(".num").hide()}else o.find(".num").hide()})}};o(),window.ESIMOGUPROFILE&&a(MOGUPROFILE),i();var u={};u.Tpl={headerMsgTpl:[]},u.View={init:function(){this.addEvent()},addEvent:function(){var t=this;$("body").on("cinfodatarecieve",function(e,o){if(o){var a=o,i={};i.twitterNew=parseInt(a.cmessageNew),i.catmeNew=parseInt(a.a),i.cfavedNew=parseInt(a.b),i.cmsgNew=parseInt(a.c),i.fansNew=parseInt(a.d),i.csysmsgNew=parseInt(a.e),i.cactiveNew=parseInt(a.f),i.intelligent=parseInt(a.g),i.ccartNew=parseInt(a.h),i.chatNew=parseInt(a.i),i.ccouponShop=parseInt(a.q),i.ccouponPlatform=parseInt(a.j),$.each(t.renders,function(t,e){$.isFunction(e)&&e(i)})}}),$(document).on("hasUnread",function(t,e){var o=s.find(".mogutalk_btn");o.length&&(e>0?o.find(".num").show():o.find(".num").hide())})},renders:{}},u.View.init();var f=function(){this.highClassName="s1_on"};f.prototype={add2Collection:function(t){$.browser.msie&&6==$.browser.version&&$.isPlainObject(t)&&t.wrap.length&&t.target&&this._registerEvent(t)},_registerEvent:function(t){var e=this;t.wrap.on("mouseenter",t.target,function(){$(this).addClass(e.highClassName).siblings().removeClass(e.highClassName)}),t.wrap.on("mouseleave",t.target,function(){$(this).removeClass(e.highClassName)})}},(new f).add2Collection({wrap:$(".header_top"),target:".s1"})}.apply(e,a),!(void 0!==i&&(t.exports=i))},function(e,o){e.exports=t},function(t,e,o){var a,i;a=[o(4),o(2)],i=function(t){var e=window.MoGu||{},o=1260,a=$(".mgj_rightbar");if(e&&e.ui&&e.ui.getTemplate){var i=e.ui.getTemplate(t);a.html(i)}var n={goTop:a.find(".mgj-back2top"),sidebar:a,sidebarCart:a.find(".mgj-my-cart"),init:function(){return"Microsoft Internet Explorer"==navigator.appName&&navigator.appVersion&&navigator.appVersion.split(";").length>1&&"MSIE6.0"==navigator.appVersion.split(";")[1].replace(/[ ]/g,"")?void $(".mgj_rightbar").hide():(this.sidebar.show(),void(this.goTop.length&&(this.offsetEl=$(".wrap").length?$(".wrap").eq(0):$("#body_wrap"),this.offsetEl.length&&(this.win=$(window),this.setSidebarPos(),this.addEvent()))))},addEvent:function(){var t=this;this.win.on("resize",function(){t.setSidebarPos()});var a=['<a target="_blank" href="http://www.mogujie.com/member" rel="nofollow">','<div class="img">','<img width="20" height="20" src="{{=it.avatar}}_48x48.jpg" alt="">',"</div>","</a>"].join("");$("body").on("userdatarecieve",function(t,o){o.avatar&&$(".mgj_rightbar .mgj-my-avatar").html(e.ui.getTemplate(a,o))}),this.sidebarCart.off().on("mouseenter",function(){t.win.width()>o||t.showSidebar()}),this.sidebar.off().on("mouseleave",function(){t.win.width()>o||t.hideSidebar()}),this.win.on("scroll",function(){$(this).scrollTop()?t.goTop.addClass("show"):t.goTop.removeClass("show")}),this.goTop.on("click",function(){return t.win.scrollTop(0),!1})},setSidebarPos:function(){var t=this.win.width();o>t?this.hideSidebar():this.showSidebar()},showSidebar:function(){this.sidebarCart.stop().animate({left:"0"}),this.goTop.stop().animate({left:"0"}),this.sidebar.removeClass("mini").stop().animate({right:"0"})},hideSidebar:function(){this.sidebarCart.stop().animate({left:"-30px"}),this.goTop.stop().animate({left:"-30px"}),this.sidebar.addClass("mini").stop().animate({right:"-30px"})}};n.init()}.apply(e,a),!(void 0!==i&&(t.exports=i))},function(t,e){t.exports='<!--\u7a7a\u7684\u53f3\u4fa7\u8fb9\u680f-->\n<div id="mgj_rightbar_top_blank" class="mgj_rightbar_960"></div>\n<!--\u65b9\u4fbf\u5b9amargin\u7684\u7a7adediv-->\n<div id="mgj_rightbar_blank_div"></div>\n<!--\u7528\u6237\u5934\u50cf-->\n<div class="sidebar-item mgj-my-avatar"></div>\n<!--\u8d2d\u7269\u8f66-->\n<div class="sidebar-item mgj-my-cart">\n    <a target="_blank" href="http://cart.mogujie.com/cart/mycart" rel="nofollow">\n        <i class="s-icon"></i>\n        <div class="s-txt">\u8d2d\u7269\u8f66</div>\n        <div class="num"></div>\n    </a>\n</div>\n<!--\u4f18\u60e0\u5238-->\n<div class="sidebar-item mgj-my-coupon">\n    <a target="_blank" rel="nofollow" href="http://www.mogujie.com/trade/promotion/user/shopcoupon">\n        <i class="s-icon"></i>\n        <div class="s-txt">\u4f18\u60e0\u5238</div>\n        <div class="num"></div>\n    </a>\n</div>\n<!--\u94b1\u5305-->\n<div class="sidebar-item mgj-my-wallet">\n    <a target="_blank" rel="nofollow" href="https://payuserp.mogujie.com/wallet/home">\n        <i class="s-icon"></i>\n        <div class="s-txt">\u94b1\u5305</div>\n    </a>\n</div>\n<!--\u8db3\u8ff9-->\n<div class="sidebar-item mgj-my-browserlog">\n    <a target="_blank" rel="nofollow" href="http://track.mogujie.com">\n        <i class="s-icon"></i>\n        <div class="s-txt">\u8db3\u8ff9</div>\n    </a>\n</div>\n<div class="sideBottom">\n    <!--\u56de\u5230\u9876\u90e8-->\n    <div class="sidebar-item mgj-back2top"><a rel="nofollow" href="javascript:;"><i class="s-icon"></i></a></div>\n</div>\n'},function(t,e,o){var a,i;a=[o(2)],i=function(){var t=window.MoGu||{},e={},o=!1,a=['<div class="shop_cart_info" style="display: none;">','<ul class="max_height_ie6">',"{{~ it.list:item:index}}","{{?index < it.topNum}}","<li>",'<a rel="nofollow" href="http://shop.mogujie.com/detail/{{=item.itemIdEsc}}" target="_blank" class="imgbox">',"{{?item.imgUrl}}",'<img src="{{=item.imgUrl}}_48x48.jpg" alt="{{=item.title}}" width="45">',"{{?}}","</a>",'<a rel="nofollow" href="http://shop.mogujie.com/detail/{{=item.itemIdEsc}}" target="_blank" class="title">{{=item.title}}</a>',"{{?item.skuAttributes}}",'<span class="info">{{~ item.skuAttributes:sku:key }}{{=sku.key}}: {{=sku.value}}  {{~}}</span>',"{{?}}",'<span class="price">\xa5{{=(item.nowprice/100)}}</span>','<span data-stockid="{{=item.stockIdEsc}}" class="del">\u5220\u9664</span>',"</li>","{{?}}","{{~}}","</ul>",'<div class="subbox">',"{{?it.total-it.topNum>0}}",'<p class="sub_info">\u8d2d\u7269\u8f66\u91cc\u8fd8\u6709<b class="num">{{=it.total - it.topNum}}</b>\u4ef6\u5546\u54c1</p>',"{{?}}",'<div class="fr">','<a rel="nofollow" href="http://cart.mogujie.com/cart/mycart" target="_blank" class="goel">\u67e5\u770b\u8d2d\u7269\u8f66</a>',"</div>","</div>","</div>"].join("");e.Model={goodsList:"",offlineCartCookies:"",offlineCartCookiesOld:"",goodsNum:0,getGoodsList:function(e){var o=this;if(o.goodsList)return void($.isFunction(e)&&e(this.goodsList));var a=[];if(t.util.getCookie("trade_cart_mogujie")?o.offlineCartCookies=t.util.getCookie("trade_cart_mogujie"):t.util.getCookie("mogu_trade_cart")&&(o.offlineCartCookiesOld=t.util.getCookie("mogu_trade_cart")),o.offlineCartCookies){var i=JSON.parse(o.offlineCartCookies);for(var n in i){var s={};s.stockId=n;for(var r in i[n])s[r]=i[n][r];a.push(s)}}if(o.offlineCartCookiesOld)for(var i=o.offlineCartCookiesOld.split(","),s={},r=0;r<i.length;r++)if(i[r].indexOf("#")>-1){var l=i[r].split("#");s.number=l[0],s.lastAddCartTime=l[1],a.push(s),s={}}else s.stockId=t.fn.id2url(i[r]);var c={marketType:"market_mogujie",topNum:o.maxShowNum,offlineCartItems:JSON.stringify(a)};$.ajax({url:"/api/cart/miniCartList",data:c,dataType:"json",type:"post",success:function(t){1001==t.status.code?(o.goodsList=t.result.cartItems?t.result.cartItems:[],o.goodsNum=t.result.totalItemNum||0,$.isFunction(e)&&e(o.goodsList)):$.isFunction(e)&&e([])},fail:function(){$.isFunction(e)&&e([])}})},delCookie:function(e){var o={};if(this.offlineCartCookies){var a=JSON.parse(this.offlineCartCookies);for(var i in a)i!=e&&(o[i]=a[i]);t.util.setCookie("trade_cart_mogujie",JSON.stringify(o),{expires:15,path:"/",domain:".mogujie.com"})}},delGood:function(t,e){var a=this;$.post("/api/cart/deleteCart",{marketType:"market_mogujie",stockId:t},function(i){1001==i.status.code?(o=i.status.isLogin,o||a.delCookie(t),$.isFunction(e)&&e()):alert(i.status.msg)},"json")}},e.View={wrap:$(".header_2015"),init:function(){this.wrap.length&&(this.extendInfo=null,this.loading=this.wrap.find(".shopping_cart_loading"),this.maxShowNum=5,this.addEvent())},addEvent:function(){var o=this;this.wrap.find(".cart_info_wrap").attr("href","http://cart.mogujie.com/cart/mycart"),$(".mgj_rightbar .mgj-my-cart a").attr("href","http://cart.mogujie.com/cart/mycart"),o.wrap.off("mouseenter").on("mouseenter",".shopping_cart_v2",function(){var i=$(this);i.addClass("sc_on"),o.loading.show(),o.extendInfo&&o.extendInfo.length?(o.loading.hide(),o.extendInfo.show()):e.Model.getGoodsList(function(n){var s={list:n,topNum:o.maxShowNum,total:e.Model.goodsNum},r="";n.length?(r=t.ui.getTemplate(a,s),o.extendInfo=$(r)):(r='<div class="shop_cart_info"></div>',o.extendInfo=$(r),o.extendInfo.addClass("empty_cart").text("\u8d2d\u7269\u8f66\u91cc\u6ca1\u6709\u5546\u54c1\uff01")),i.append(o.extendInfo),o.loading.hide(),o.extendInfo.show()})}),o.wrap.off("mouseleave").on("mouseleave",".shopping_cart_v2",function(){o.extendInfo&&o.extendInfo.hide()&&$(this).removeClass("sc_on")}),o.wrap.off("click").on("click",".shopping_cart_v2 .del",function(){var t=$(this),a=t.data("stockid"),i=t.parent(),n=e.Model.goodsNum;t.hasClass("disabled")||(t.addClass("disabled"),e.Model.delGood(a,function(){n--,i.fadeOut("slow",function(){t.removeClass("disabled"),n?(i.remove(),e.Model.goodsNum=n):(o.extendInfo=$(".shop_cart_info"),o.extendInfo.addClass("empty_cart").text("\u8d2d\u7269\u8f66\u91cc\u6ca1\u6709\u5546\u54c1\uff01"))})}))})}},e.View.init()}.apply(e,a),!(void 0!==i&&(t.exports=i))},function(t,e,o){var a;a=function(){var t={wrap:$(".back2top_wrap"),init:function(){this.wrap.length&&(this.offsetEl=$(".wrap").length?$(".wrap").eq(0):$("#body"),this.offsetEl.length&&(this.win=$(window),this.goTop=this.wrap.find(".go_top"),this.setPos(),this.wrap.show(),this.addEvent()))},addEvent:function(){var t=this;this.win.on("resize",function(e){t.setPos()}),this.win.on("scroll",function(e){$(this).scrollTop()?t.goTop.addClass("show"):t.goTop.removeClass("show")}),this.goTop.on("click",function(e){return t.win.scrollTop(0),!1})},setPos:function(){var t=this.offsetEl.offset(),e=this.offsetEl.outerWidth(),o=this.win.width(),a=this.wrap.width(),i=15,n=t.left+e+20;a+n+i>o?this.wrap.css({left:"auto",right:i}):this.wrap.css({left:n,right:"auto"})}};t.init()}.call(e,o,e,t),!(void 0!==a&&(t.exports=a))}])}),"function"==typeof define&&define.amd&&require(["pc/common/nav/index"]);define("text!act_sidebar.tpl",[],function(){return'<div id="mgj_rightbar_top_blank" class="mgj_rightbar_960"></div>{{? !it}}<div id="mgj_rightbar_blank_div"></div>{{?}}{{? it}}<style>/*4\u4e2a\u90e8\u5206\u80cc\u666f\u4e3a\u96ea\u78a7\u56fe*/.mgj_rightbar .mgj-my-actnavin .actnav_box .main_link,.mgj_rightbar .mgj-my-actnavin .actnav_box .actnav_mainin,.mgj_rightbar .mgj-my-actnavin .actnav_box .actnav_my,.mgj_rightbar .mgj-my-actnavin .actnav_box .actnav_shop,.mgj_rightbar .mgj-my-actnavin .actnav_box .bot_bg { background-image: url({{= it.barHeadBg}}); background-repeat: no-repeat; }/*\u4e3a\u6837\u5f0f\u6dfb\u52a0hover\u6548\u679c\u80cc\u666f\u56fe*/.mgj_rightbar .mgj-my-actnavin .actnav_box .actnav_mainin:hover,.mgj_rightbar .mgj-my-actnavin .actnav_box .actnav_mainin.act_nav_tab_on{ background: url({{= it.pageTabLight}}) no-repeat; }.mgj_rightbar .mgj-my-actnavin .actnav_box .actnav_my:hover,.mgj_rightbar .mgj-my-actnavin .actnav_box .actnav_my.act_nav_tab_on{ background: url({{= it.redTabLight}}) no-repeat; }.mgj_rightbar .mgj-my-actnavin .actnav_box .actnav_shop:hover,.mgj_rightbar .mgj-my-actnavin .actnav_box .actnav_shop.act_nav_tab_on{ background: url({{= it.shopTabLight}}) no-repeat; }.mgj_rightbar .mgj-my-actnavin .actnav_box .act_nav_tab_on { width: 110px; }/*tab\u5185\u5bb9\u5934\u90e8\u56fe\u7247*/.mgj_actnav_box .actnavBox_header{ background: url({{= it.pageHead}}) no-repeat; }.mgj_actnav_box .redpay_pre_header { background: url({{= it.redHead}}) no-repeat; }.mgj_actnav_box .redpay_header { background: url({{= it.redFormalHead}}) no-repeat; }.mgj_actnav_box .shop_header { background: url({{= it.shopHead}}) no-repeat; }/*\u4f1a\u573a\u5bfc\u822a\u5185\u5bb9\u90e8\u5206\u6837\u5f0f*/.mgj_actnav_box .actnavBox_body .body_main .body_main_item { background: url({{= it.oneM}}) no-repeat; }.mgj_actnav_box .actnavBox_body .body_centre .body_centre_item { background: url({{= it.twoM}}) no-repeat; }.mgj_actnav_box .actnavBox_body .body_main .body_main_item:hover { background: url({{= it.oneL}}) no-repeat; }.mgj_actnav_box .actnavBox_body .body_centre .body_centre_item:hover { background: url({{= it.twoL}}) no-repeat; }.mgj_actnav_box .actnavBox_body .body_centre .body_centre_title { background: url({{= it.twoTitle}}) no-repeat; }/*\u731c\u4f60\u559c\u6b22\u6837\u5f0f*/.mgj_rightbar .act-like-goods-area .gap .title { background: url({{= it.gTitle}}) no-repeat; }.mgj_rightbar .act-like-goods-area span.price-tag { background: url({{= it.gp}}) no-repeat; }.mgj_rightbar .act-like-goods-area .redpay-use .hb-img { background: url({{= it.gr}}) no-repeat 0 2px; }</style><div class="img_pre_hide" style="height: 0;width: 0;overflow: hidden;"><img src="{{= it.pageTabLight}}" alt=""><img src="{{= it.redTabLight}}" alt=""><img src="{{= it.shopTabLight}}" alt=""></div><div class="mgj-my-actnavin"><div class="actnav_box"><a class="main_link J_act_main_link" target="_blank" href="javascript:;"></a><a class="actnav_mainin act_nav_tab" href="javascript:void(0)" rel="nofollow"></a><a class="actnav_my act_nav_tab" href="javascript:void(0)" rel="nofollow"></a><a class="actnav_shop act_nav_tab" href="javascript:void(0)" rel="nofollow"></a><div class="bot_bg"></div></div></div><div class="mgj_actnav_box"><div class="body_enter"><div class="actnavBox_header"><div class="ele_header_cont"><i></i></div></div><div class="actnavBox_body"><div id="enterArea"><div class="ele_body_loading"><img src="http://s6.mogucdn.com/pic/140813/kuw9n_ieyggojrmi4dknlbmiytambqgiyde_26x26.gif"><div class="ele_loading_text">\u670d\u52a1\u5668\u5f00\u5c0f\u5dee\u4e86\uff0c\u8bf7\u7a0d\u540e\u67e5\u770b</div></div></div></div></div><div class="body_redpay" ><div class="actnavBox_header redpay_pre_header show"><div class="ele_header_cont"><i></i></div></div><div class="actnavBox_header redpay_header hide"><div class="ele_header_cont"><i></i><div class="redpay_item"></div><div class="fullreturn_item"></div><div class="hover_line"></div></div></div><div class="actnavBox_body"><div class="redpay-user-box show"><div class="redpay-desc"><div class="go-rule" ><span class="show-rule-btn" id="showRuleBtn"><img src="http://s16.mogucdn.com/p1/160301/upload_ie3weyjwgazgmnzqg4zdambqgayde_16x16.png">\u4f7f\u7528\u89c4\u5219</span></div><div id="redpayArea"></div></div><div class="redpay-rule-box" id="ruleArea"><div class="popver-trangle"><img src="http://s18.mogucdn.com/p1/160304/upload_ie3tan3ggiydknzrg4zdambqgayde_34x16.png"></div><div class="popver-body "><div class="popver-title">XXXXXXXXX</div><div class="popver-content" id="ruleContent"></div></div></div></div><div class="fullreturn-user-box hide"><div class="fullreturn-desc"><div class="go-full-return-rule" ><span class="show-full-return-rule-btn" id="showRuleFullReturnBtn"><img src="http://s16.mogucdn.com/p1/160301/upload_ie3weyjwgazgmnzqg4zdambqgayde_16x16.png">\u6ee1\u8fd4\u6d3b\u52a8\u89c4\u5219</span></div><div id="fullReturnArea"></div></div><div class="fullreturn-rule-box" id="ruleFullReturnArea"><div class="popver-trangle"><img src="http://s18.mogucdn.com/p1/160304/upload_ie3tan3ggiydknzrg4zdambqgayde_34x16.png"></div><div class="popver-body "><div class="popver-title">XXXXXXXXX</div><div class="popver-content" id="ruleFullReturnContent"></div></div></div></div><div id="act_goods_like_box"><div class="ele_body_loading"><img src="http://s6.mogucdn.com/pic/140813/kuw9n_ieyggojrmi4dknlbmiytambqgiyde_26x26.gif"><div class="ele_loading_text">\u670d\u52a1\u5668\u5f00\u5c0f\u5dee\u4e86\uff0c\u8bf7\u7a0d\u540e\u67e5\u770b</div></div></div></div></div><div class="body_shop"><div class="actnavBox_header shop_header"><div class="ele_header_cont"><i></i></div></div><div class="actnavBox_body"><div id="act-shop-coupon-box"><div class="ele_body_loading"><img src="http://s6.mogucdn.com/pic/140813/kuw9n_ieyggojrmi4dknlbmiytambqgiyde_26x26.gif"><div class="ele_loading_text">\u670d\u52a1\u5668\u5f00\u5c0f\u5dee\u4e86\uff0c\u8bf7\u7a0d\u540e\u67e5\u770b</div></div></div><div id="act-good-shop-box"><div class="ele_body_loading"><img src="http://s6.mogucdn.com/pic/140813/kuw9n_ieyggojrmi4dknlbmiytambqgiyde_26x26.gif"><div class="ele_loading_text">\u670d\u52a1\u5668\u5f00\u5c0f\u5dee\u4e86\uff0c\u8bf7\u7a0d\u540e\u67e5\u770b</div></div></div></div></div></div>{{?}}'}),define("text!act_sidebar_enter.tpl",[],function(){return'{{? it}}<div class="body_main clearfix">{{~ it.data["2426"].list:items}}<a class="body_main_header" href="{{=items.link}}" target="_blank"><img src="{{=items.image}}"></a>{{~ }}{{~ it.data["2421"].list:items}}<a class="body_main_item yahei fl" href="{{=items.link}}" target="_blank">{{=items.title}}</a>{{~ }}</div><div class="body_centre clearfix"><div class="body_centre_title"></div>{{~ it.data["2427"].list:items}}<a class="body_centre_item yahei fl" href="{{=items.link}}" target="_blank">{{=items.title}}</a>{{~ }}</div>{{? }}'}),define("text!act_sidebar_fullReturn.tpl",[],function(){return'{{? it}}{{? !it.isLogin}}<img class="main-img" src="http://s17.mogucdn.com/p1/160301/upload_ie4tsnjwgjtdonzqg4zdambqgqyde_38x38.png"><div class="sidebar_tip gray666">\u4f60\u8fd8\u6ca1\u6709\u767b\u5f55</div><a href="javascript:void(0);" class="fullreturn-btn" id="goLogin">\u7acb\u5373\u767b\u5f55</a>{{?? !it.hasFullReturn}}<img class="main-img" src="http://s16.mogucdn.com/p1/160301/upload_ie4tomzqgq4wcnzqg4zdambqgqyde_31x39.jpg"><div class="sidebar_tip gray666">\u60a8\u7684\u6ee1\u8fd4\u4f59\u989d\u4e3a\u96f6\uff0c<br/>\u5355\u7b14\u5b9e\u4ed8\u6ee1\u767e\u5373\u8fd4\uff01</div><a href="{{=it.mainUrl}}" class="fullreturn-btn" target="_blank">\u53bb\u8d2d\u7269</a>{{?? }}<div class="sidebar_tip gray999">\u91d1\u989d\u603b\u8ba1\uff08\u5143\uff09</div><div class="fullreturn-num">{{=it.price}}</div><div class="sidebar_tip gray666">(\u53ef\u5728\u6536\u94f6\u53f0\u62b5\u6263\u4ed8\u6b3e\u91d1\u989d)</div><a href="{{=it.link}}" class="fullreturn-btn" style="background-image:none;" target="_blank">\u67e5\u770b\u660e\u7ec6</a>{{? }}{{? }}'}),define("text!act_sidebar_goodShop.tpl",[],function(){return'{{?it }}{{? it.list}}<div class="act-good-shop-area"><div class="gap"><div class="title">\u597d\u5e97\u63a8\u8350</div>{{~ it.list:item:index}}{{? index < 3}}<div class="good-shop-list" ><div class="good-shop-item clearfix"><div class="left-img"><a href="{{=item.shop_url}}" data-ext-acm="{{=item.acm}}" class="loading_bg_90 img-wrap"target="_blank"><img src="{{=item.list[0].image }}" alt=""></a></div><div class="right-info fl"><a href="{{=item.shop_url}}" data-ext-acm="{{=item.acm}}" target="_blank"><div class="name yahei">{{=item.shopName}}</div><div class="line">----------------------</div><div class="coupon-area"><div class="cutPrice"><b class="yahei">&yen;</b>{{=item.cutPrice || 0}}</div><div class="limitPrice yahei">\u6ee1{{=item.limitPrice }}\u5143\u4f7f\u7528</div></div><div><div class="btn go-shopping yahei">\u53bb\u901b\u5e97</div></div></a></div></div></div>{{?}}{{~}}</div></div>{{?}}{{? }}'}),define("text!act_sidebar_guessLike.tpl",[],function(){return'{{?it }}{{? it.list}}<div class="act-like-goods-area"><div class="gap"><div class="title"></div>{{~ it.list:item}}<div class="like-goods-list" data-iid="{{=item.item_id}}"><div class="like-goods-item clearfix"><div class="left-img"><a href="{{=item.item_url}}" data-ext-acm="{{=item.acm}}" class="loading_bg_90 img-wrap"target="_blank"><img src="{{=item.image}}" alt=""></a></div><div class="right-info fl"><a href="{{=item.item_url}}" data-ext-acm="{{=item.acm}}" target="_blank"><div class="name single-line yahei">{{=item.title}}</div><div class="price-area single-line"><span class="price-tag fl"></span><span class="price yahei fl">\xa5{{=item.discountPrice||item.price}}</span><span class="old-price yahei fl">\xa5{{=item.price}}</span></div><div class="redpay-use single-line clearfix"><span class="hb-img fl"></span><span class="hb-price fl">{{? item.hbPrice}}\u7ea2\u5305\u6700\u9ad8\u518d\u62b5\uffe5{{=item.hbPrice}}{{??}}\u7528\u7ea2\u5305\u66f4\u5212\u7b97{{?}}</span></div><div>{{? it.isFormal}}<div class="btn add-shopcar yahei">\u7acb\u5373\u8d2d\u4e70</div>{{?? }}<div class="btn add-shopcar yahei">\u52a0\u5165\u8d2d\u7269\u8f66</div>{{?}}</div></a></div></div></div>{{~}}</div></div>{{?}}{{? }}'}),define("text!act_sidebar_redpay.tpl",[],function(){return'{{? it}}{{? !it.isLogin}}<img class="main-img" src="http://s17.mogucdn.com/p1/160301/upload_ie4tsnjwgjtdonzqg4zdambqgqyde_38x38.png"><div class="sidebar_tip gray666">\u4f60\u8fd8\u6ca1\u6709\u767b\u5f55</div><a href="javascript:void(0);" class="redpay-btn" id="goLogin">\u7acb\u5373\u767b\u5f55</a>{{?? !it.hasRedpay}}<img class="main-img" src="http://s16.mogucdn.com/p1/160301/upload_ie4tomzqgq4wcnzqg4zdambqgqyde_31x39.jpg"><div class="sidebar_tip gray666">\u4f60\u8fd8\u6ca1\u6709\u7ea2\u5305\u54e6<br/>\u5feb\u53bb\u4e3b\u4f1a\u573a\u8d62\u53d6\u7ea2\u5305\u5427</div><a href="{{=it.mainUrl}}" class="redpay-btn" target="_blank">\u53bb\u4e3b\u4f1a\u573a</a>{{?? }}<div class="sidebar_tip gray999">\u7ea2\u5305\u603b\u8ba1\uff08\u5143\uff09</div><div class="redpay-num">{{=it.price}}</div><div class="sidebar_tip gray666">\uff08\u53ef\u4e0e\u5e97\u94fa\u5238\u3001\u5e73\u53f0\u5238\u53e0\u52a0\uff09</div><a href="{{=it.link}}" class="redpay-btn" style="background-image:none;" target="_blank">\u67e5\u770b\u7ea2\u5305\u660e\u7ec6</a>{{? }}{{? }}'}),define("text!act_sidebar_shopCoupon.tpl",[],function(){return'{{?it }}{{? it.list}}<div class="act-shop-coupon-area"><div class="gap"><div class="title">\u6211\u7684\u5e97\u94fa\u5238</div>{{~ it.list:item:index}}{{? index < 3}}<div class="shop-coupon-list"><div class="shop-coupon-item clearfix"><div class="left-img"><a href="{{=item.shopUrl}}" class="loading_bg_90 img-wrap"target="_blank"><img src="{{=item.recommendItemCover}}" alt=""></a></div><div class="right-info fl"><a href="{{=item.shopUrl}}" target="_blank"><div class="name yahei">{{=item.shopName}}</div><div class="line">----------------------</div><div class="coupon-area"><div class="cutPrice" ><b class="yahei">&yen;</b>{{=item.cutPrice || 0}}</div><div class="limitPrice yahei">\u6ee1{{=item.limitPrice }}\u5143\u4f7f\u7528</div></div><div><div class="btn go-shopping yahei">\u53bb\u901b\u5e97</div></div></a></div></div></div>{{?}}{{~}}<a href="{{=it.link}}" class="check-more yahei" target="_blank">\u67e5\u770b\u66f4\u591a<span class="logo"></span></a></div></div>{{?}}{{? }}'}),define("text!act_topbar.tpl",[],function(){return'<div class="wrap"><div class="innerwrap clearfix">{{~it:item:index}}<a class="fl {{?index===0}}first reset{{??index===it.length-1}}last{{?}}" href="{{=item.link || "javascript:;"}}" target="_blank"></a>{{~}}</div></div>'}),define("text",{load:function(e){throw new Error("Dynamic load not allowed: "+e)}}),require(["text!act_sidebar.tpl","text!act_sidebar_enter.tpl","text!act_sidebar_guessLike.tpl","text!act_sidebar_redpay.tpl","text!act_sidebar_shopCoupon.tpl","text!act_sidebar_goodShop.tpl","text!act_sidebar_fullReturn.tpl","text!act_topbar.tpl"],function(e,a,i,t,n,o,d,s){function r(e){function a(e){if(k||S||MoGu.isTopSideNavOpen)c();else for(var a=0;a<x.length;a++){var i=x[a].topBarUrl,t=e.indexOf(i)>-1;if(t){c();break}}}function i(e){if(k||S||MoGu.isTopSideNavOpen)l();else for(var a=0;a<w.length;a++){var i=w[a].sideBarUrl,t=e.indexOf(i)>-1;if(t){l();break}}}var t=e.getTime()/1e3;$.ajax({url:T.maitUrl,type:"GET",dataType:"jsonp",jsonpCallback:"jQuery6583_6584",data:{pids:"6583,6584,21943,21944"}}).done(function(e){e.success&&"SUCCESS"==e.returnCode&&e.data[6583].list.length>0&&e.data[6584].list.length>0&&e.data[21943].list.length>0&&e.data[21944].list.length>0&&(f=e.data[6583].list[0],y=e.data[6584].list[0],x=e.data[21943].list,w=e.data[21944].list,_="false"==f.openFlag,_&&(t=parseInt(g._getQueryString("_act_set_time")||0)),t>f.actOpenTime&&t<f.actCloseTime&&(m=!0,t>f.actSellTime&&(h=!0),MoGu&&MoGu.ui&&MoGu.ui.getTemplate&&(a(j),i(j))))})}function l(){var s=MoGu.ui.getTemplate(e,y);$("#mgj_rightbar_blank_div").css("display","none"),v.prepend(s),function(e,a){function i(a,i,d,s){a[t](o+i,"wheel"==n?d:function(a){!a&&(a=e.event);var i={originalEvent:a,target:a.target||a.srcElement,type:"wheel",deltaMode:"MozMousePixelScroll"==a.type?0:1,deltaX:0,deltaY:0,preventDefault:function(){a.preventDefault?a.preventDefault():a.returnValue=!1}};return"mousewheel"==n?(i.deltaY=-1/40*a.wheelDelta,a.wheelDeltaX&&(i.deltaX=-1/40*a.wheelDeltaX)):i.deltaY=a.detail,d(i)},s||!1)}var t,n,o="";e.addEventListener?t="addEventListener":(t="attachEvent",o="on"),n="onwheel"in a.createElement("div")?"wheel":void 0!==a.onmousewheel?"mousewheel":"DOMMouseScroll",e.addWheelListener=function(e,a,t){i(e,n,a,t),"DOMMouseScroll"==n&&i(e,"MozMousePixelScroll",a,t)}}(window,document);var r={goTop:v.find(".mgj-back2top"),sidebar:v,sidebarCart:v.find(".mgj-my-cart"),eleBtn:$(".mgj_rightbar").find(".actnav_box"),eleBack:$(".mgj_actnav_box .ele_header_cont i"),eleBox:$(".mgj_actnav_box"),sidebarShow:!1,isLogin:!1,contentIds:"2603,2426,2421,2427",redContentAdd:!1,fullReturnAdd:!1,shopCouponAdd:!1,redGoodsId:"",campaignId:"",goodShopId:"",mainUrl:"",redpayDetail:"",fullreturnDetail:"",userInfo:{uuid:"",avatar:""},init:function(){var e=this;this.goTop.length&&(this.offsetEl=$(".wrap").length?$(".wrap").eq(0):$("#body_wrap"),this.offsetEl.length&&(this.win=$(window),this.setSidebarPos(),e.redGoodsId=f.goodsLikeId,e.campaignId=f.redKey,e.redpayDetail=f.redpayDetail,e.fullreturnDetail=f.fullreturnDetail,e.goodShopId=f.goodShopId,this.userInfo.uuid=MoGu&&MoGu.util&&MoGu.util.getCookie("__mgjuuid"),this.getActContentMait(),MoGu&&MoGu.fn&&MoGu.fn.getUserData&&MoGu.fn.getUserData(function(a,i){i&&i.avatar&&(e.isLogin=!0,e.userInfo.avatar=i.avatar),e.addEvent()})))},getActContentMait:function(){var e=this;$.ajax({url:T.maitUrl,type:"GET",dataType:"jsonp",jsonpCallback:"jQueryActData",data:{pids:e.contentIds}}).done(function(i){if(i.success&&"SUCCESS"==i.returnCode){$("#enterArea").html(MoGu.ui.getTemplate(a,i));var t=i.data[2603].list[0];$("#ruleArea .popver-body").html('<div class="popver-title ">'+t.ruleTitle+'</div><div class="popver-content" id="ruleContent">'+t.ruleContext+"</div>"),$("#ruleFullReturnArea .popver-body").html('<div class="popver-title ">'+t.returnRuleTitle+'</div><div class="popver-content" id="ruleFullReturnContent">'+t.returnRuleContext+"</div>"),e.mainUrl=i.data[2426].list[0].link,$(".J_act_main_link").attr("href",e.mainUrl)}else $("#enterArea .ele_loading_text").show()}).fail(function(){$("#enterArea .ele_loading_text").show()})},getRedContent:function(){function e(){if(o.redContentAdd)return!1;o.redContentAdd=!0;var e={isLogin:o.isLogin,mainUrl:o.mainUrl,hasRedpay:!1,price:0,link:""};o.isLogin?$.ajax({url:T.redpayUrl,type:"GET",data:{campaignId:o.campaignId},dataType:"jsonp"}).done(function(a){if("SUCCESS"==a.returnCode){var i=a.data.num;+i?(e.hasRedpay=!0,e.price=(i/100).toFixed(2),e.link=o.redpayDetail):(e.hasRedpay=!1,e.price=0)}else 1004!=a.returnCode&&4004!=a.returnCode||(e.hasRedpay=!1);$("#redpayArea").html(MoGu.ui.getTemplate(t,e))}):$("#redpayArea").html(MoGu.ui.getTemplate(t,e))}function a(){if(o.fullReturnAdd)return!1;o.fullReturnAdd=!0;var e={price:0,isLogin:!1,hasFullReturn:!1,mainUrl:o.mainUrl,link:o.fullreturnDetail};$.ajax({url:T.fullReturnUrl,type:"GET",dataType:"jsonp"}).done(function(a){if("SUCCESS"==a.returnCode){var i=a.data.totalAmout;i>0?(e.isLogin=!0,e.hasFullReturn=!0,e.price=(i/100).toFixed(2)):(e.isLogin=!0,e.hasFullReturn=!1)}else 16e4==a.returnCode?(e.isLogin=!0,e.hasFullReturn=!1):"1002"==a.returnCode&&(e.isLogin=!1,e.hasFullReturn=!1);$("#fullReturnArea").html(MoGu.ui.getTemplate(d,e))})}function n(){var e={pid:o.redGoodsId,pageSize:60,plat:"pc",uuid:o.userInfo.uuid};o.isLogin&&o.userInfo.uid&&(e.uidE=o.userInfo.uid),$.ajax({url:T.guessLikeUrl,type:"GET",dataType:"jsonp",data:e}).done(function(e){if(e.success&&"SUCCESS"==e.returnCode&&e.data.list.length>0){for(var a=e.data.list,t=[],n=[],o=[],d={isFormal:h,list:a},s=0;s<a.length;s++){var r=a[s].image;a[s].price=Math.ceil(a[s].price),r.indexOf(".jpg")>0&&r.indexOf(".jpg_")<0&&(a[s].image+="_160x999.jpg")}$("#act_goods_like_box").html(MoGu.ui.getTemplate(i,d));for(var s=0;s<a.length;s++)t.push(a[s].item_id),n.push(s),o.push(a[s].acm);g._pushLog({eventid:70500,iids:t,indexs:n,acms:o},70500)}else $("#act_goods_like_box .ele_loading_text").show()}).fail(function(){$("#act_goods_like_box .ele_loading_text").show()})}var o=this,s=$(".redpay_pre_header"),r=$(".redpay_header");e(),h&&b&&(s.removeClass("show").addClass("hide"),r.removeClass("hide").addClass("show"),a()),n()},getShopContent:function(){function e(){return i.shopCouponAdd?!1:(i.shopCouponAdd=!0,void $.ajax({url:T.shopCouponUrl,type:"GET",dataType:"jsonp"}).done(function(e){if(e&&1001==e.returnCode&&e.data&&e.data.couponList&&e.data.couponList.length>0){for(var a=e.data.couponList,i=[],t={isFormal:h,list:a,link:e.data.moreUrl},o=0;o<a.length;o++){var d=(a[o].shopUrl,a[o].recommendItemCover),s=a[o].cutPrice,r=a[o].limitPrice;d.indexOf(".jpg")>0&&d.indexOf(".jpg_")<0&&(a[o].recommendItemCover+="_160x999.jpg"),a[o].cutPrice=s/100,a[o].limitPrice=r/100}$("#act-shop-coupon-box").html(MoGu.ui.getTemplate(n,t));for(var o=0;o<a.length;o++)i.push(o);g._pushLog({eventid:70500,indexs:i},70500)}else $("#act-shop-coupon-box .ele_body_loading").hide()}).fail(function(){$("#act-shop-coupon-box .ele_body_loading").hide()}))}function a(){$.ajax({url:T.goodShopUrl,type:"GET",dataType:"jsonp",data:{pid:i.goodShopId,uuid:i.userInfo.uuid}}).done(function(e){if(e.success&&"SUCCESS"==e.returnCode&&e.data.list.length>0){for(var a=e.data,i=a.list,t=[],n=[],d=[],s={isFormal:h,list:i},r=0;r<i.length;r++){var l=i[r].list[0].image;i[r].cutPrice,i[r].limitPrice;l.indexOf(".jpg")>0&&l.indexOf(".jpg_")<0&&(i[r].list[0].image+="_160x999.jpg")}$("#act-good-shop-box").html(MoGu.ui.getTemplate(o,s));for(var r=0;r<i.length;r++)t.push(i[r].shop_id),n.push(r),d.push(i[r].acm);g._pushLog({eventid:70500,iids:t,indexs:n,acms:d},70500)}else $("#act-good-shop-box .ele_loading_text").show()}).fail(function(){$("#act-good-shop-box .ele_loading_text").show()})}var i=this;e(),a()},addEvent:function(){var e=this,a=($("#enterArea"),$("#redpayArea"),$("#fullReturnArea"),$("#act_goods_like_box"),$("#showRuleBtn")),i=$("#showRuleFullReturnBtn"),t=$("#ruleArea"),n=($("#ruleContent"),$("#ruleFullReturnArea"));$("#ruleFullReturnContent"),$(".redpay_header");if(this.win.on("resize",function(a){e.setSidebarPos()}),this.sidebarCart.off().on("mouseenter",function(){e.win.width()>p||e.sidebarShow||e.showSidebar()}),this.sidebar.off().on("mouseleave",function(){e.win.width()>p||e.sidebarShow||e.hideSidebar()}),this.eleBtn.on("click",".actnav_mainin",function(){$(this).hasClass("act_nav_tab_on")||e.changeSiderbarContent(1)}),this.eleBtn.on("click",".actnav_my",function(){$(this).hasClass("act_nav_tab_on")||(e.changeSiderbarContent(0),e.getRedContent())}),this.eleBtn.on("click",".actnav_shop",function(){$(this).hasClass("act_nav_tab_on")||(e.changeSiderbarContent(2),e.getShopContent())}),$("body").on("click",function(a){var i=$(a.target);i[0]!=v[0]&&0==v.find(i).length&&e.sidebarShow&&(e.hideSidePanel(),e.hideSidebar())}),e.eleBox.on("click",".ele_header_cont i",function(){e.sidebarShow&&(e.hideSidePanel(),e.hideSidebar())}),a.add(t).on("mouseenter",function(){t.addClass("show")}),a.add(t).on("mouseleave",function(){t.removeClass("show")}),i.add(n).on("mouseenter",function(){n.addClass("show")}),i.add(n).on("mouseleave",function(){n.removeClass("show")}),h){var o=$(".redpay_item"),d=$(".fullreturn_item"),s=$(".redpay-user-box"),r=$(".fullreturn-user-box"),l=$(".hover_line");o.on("click",function(){s.removeClass("hide").addClass("show"),r.removeClass("show").addClass("hide"),l.animate({left:"24px"})}),d.on("click",function(){s.removeClass("show").addClass("hide"),r.removeClass("hide").addClass("show"),l.animate({left:"136px"})})}if(addWheelListener(e.eleBox[0],function(a){var i=60;-1!=navigator.appVersion.indexOf("Mac")&&(i=10),0!=a.deltaY&&(e.eleBox[0].scrollTop+=a.deltaY>0?i:-i),a.preventDefault()}),!e.isLogin){var c=location.href;v.on("click","#goLogin",function(e){var a="http://portal.mogujie.com/user/login?refer="+c;e.preventDefault(),window.location=a})}},setSidebarPos:function(){var e=(this.offsetEl.offset(),this.offsetEl.outerWidth(),this.win.width());p>e?this.hideSidebar():this.showSidebar(),this.hideSidePanel()},showSidePanel:function(){this.sidebar.stop().animate({right:"270px"}),this.eleBox.stop().animate({right:"0px"}),this.sidebarShow=!0},hideSidePanel:function(){this.eleBox.stop().animate({right:"-270px"}),this.sidebarShow=!1,this.eleBtn.find(".act_nav_tab").removeClass("act_nav_tab_on")},changeSiderbarContent:function(e){this.eleBtn.find(".act_nav_tab").removeClass("act_nav_tab_on"),1==e?($(".body_enter").show().siblings().hide(),this.eleBtn.find(".actnav_mainin").addClass("act_nav_tab_on")):0==e?($(".body_redpay").show().siblings().hide(),this.eleBtn.find(".actnav_my").addClass("act_nav_tab_on")):($(".body_shop").show().siblings().hide(),this.eleBtn.find(".actnav_shop").addClass("act_nav_tab_on")),this.showSidePanel()},showSidebar:function(){this.sidebarCart.stop().animate({left:"0px"}),this.goTop.stop().animate({left:"0px"}),this.sidebar.removeClass("mini").stop().animate({right:"0px"})},hideSidebar:function(){var e,a=-95,i=0;e=this.win.width()<p?a:i,this.sidebarCart.stop().animate({left:e}),this.goTop.stop().animate({left:e}),this.sidebar.addClass("mini").stop().animate({right:e})}};r.init()}function c(){var e=$('<div class="promotionTopBarContainer"></div>');$("#header").before(e),$.ajax({url:T.maitUrl,type:"GET",dataType:"jsonp",data:{pids:"22149,22450"}}).done(function(a){if("SUCCESS"==a.returnCode&&a.success){var i=a.data[22149].list,t=a.data[22450].list[0];if(!(a&&a.data&&i.length>0&&t))return;e.css("backgroundColor",t.bg_nav_color);var n=!!$("body").hasClass("media_screen_1200"),o=MoGu.ui.getTemplate(s,i);e.html(o);var d=e.find(".innerwrap"),r=new Image,l="";if(n?(l=t.image_big,r.src=l):(l=t.image_small,r.src=l),r.complete)return d.css("background-image","url("+r.src+")"),void e.animate({"margin-top":"0"});r.onload=function(){d.css("background-image","url("+r.src+")"),e.animate({"margin-top":"0"})}}})}window.MoGu=window.MoGu||{};var g={};g._getQueryString=function(e,a){var a=a||window.location.search;if(!e){var i=a.substring(1,a.length).split(/[&=]/),t={};return $.each(i,function(e,a){e%2===0&&(t[a]=i[e+1])}),t}var n=new RegExp("(^|&)"+e+"=([^&]*)(&|$)"),o=a.substr(1).match(n);return null!=o?unescape(o[2]):null},g._log=function(e){_&&window.console&&console.log&&console.log(e)},g.getServerTime=MoGu.fn&&MoGu.fn.getServerTime||function(e){$.ajax({url:"http://time.mogujie.com/time.php",type:"GET",dataType:"jsonp",jsonpCallback:"jquery_get_time_ver1"}).done(function(a){if(a&&a.result&&a.result.time){var i=new Date(1e3*a.result.time);e(i)}else e(new Date)}).fail(function(){e(new Date)})},g._pushLog=function(e,a){setTimeout(function(){if(window.logger&&logger.log)try{logger.log(a,e)}catch(i){_log(i)}else if(window.detePtp&&detePtp.logFromtSend){var t=window.detePtp._collectParams||{};e.ptp_cnt=t.ptp_cnt||"",e.ptp_url=t.ptp_url||"",e.ptp_ref=t.ptp_ref||"";try{detePtp.logFromtSend("e",a,e)}catch(i){_log(i)}}},1e3)};var u=(navigator.userAgent,$.browser.msie&&("6.0"==$.browser.version||"7.0"==$.browser.version)),p=1260,v=$(".mgj_rightbar"),m=($("#mar_enter_redpay"),!1),h=!1,_=0,b=0,f={},y={},x="",w="",j=location.href.split("?")[0],k=!1,C=$("#shopBaseUrlSec");C.length>0&&(k=location.host==C.val().split("/")[2]||"shop.mogujie.com"==location.host);var S="http://www.mogujie.com/"===j||"http://www.mogujie.com"===j||"http://www.mogujie.com/index"===j;MoGu.isTopSideNavOpen=!1;var T={maitUrl:"http://mce.mogucdn.com/jsonp/multiget/3",redpayUrl:"http://promotion.mogujie.com/jsonp/getRedPacket/1",fullReturnUrl:"http://hongbao.mogujie.com/jsonp/hongbaoAmount/1",guessLikeUrl:"http://mce.mogujie.com/jsonp/get/3",shopCouponUrl:"http://www.mogujie.com/mbractivity/myshopcoupon.jsonp",goodShopUrl:"http://mce.mogujie.com/jsonp/recommend/4"};u||g.getServerTime(r)});!function(e){"use strict";function t(){this.arr="abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789",this.arrLen=this.arr.length}function n(){var e=s.getPtpInfoAndExtra(),t=d.getValue(g.pEventId);l.logData("p",t,e)}function r(){if(o.info.isNative){var e=s.getPtpCnt();l.logAppPevent(e)}else v?n():d.listenTo("LoggerReady",function(){n()})}if(!e.logger){var o=e.logger={};o.version="0.1.17",o._xcore=!1;var i=navigator.userAgent.toLowerCase().indexOf("xcore")>-1;i&&window.loader&&window.loader.script&&(o._xcore=!0),"undefined"==typeof console&&(window.console={log:function(){}});var a="**logger.js---\u6253\u70b9\u51fa\u9519:";!function(){function e(){if(!r){r=!0;for(var e=0;e<n.length;e++)n[e].fn.call(window,n[e].ctx);n=[]}}function t(){"complete"===document.readyState&&e()}var n=[],r=!1,i=!1;o._xcore&&(r=!0),o.ready=function(o,a){return r?void setTimeout(function(){o(a)},1):(n.push({fn:o,ctx:a}),void("complete"===document.readyState||!document.attachEvent&&"interactive"===document.readyState?setTimeout(e,1):i||(document.addEventListener?(document.addEventListener("DOMContentLoaded",e,!1),window.addEventListener("load",e,!1)):(document.attachEvent("onreadystatechange",t),window.attachEvent("onload",e)),i=!0)))}}(),function(){var e=window.jQuery||window.Zepto,t=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]==t)return n+1;return-1},n={getA:function(e){var t=e;if("A"==t.tagName)return e;for(;t.parentNode;)if(t=t.parentNode,"A"==t.tagName)return t},getParentByClass:function(t,n){if(t){if(e)return $(t).parents("."+n);for(var r,o=t;o.parentNode;)if(o=o.parentNode,r=o.className&&-1!=o.className.indexOf(n))return o}},getParents:function(t,n){if(t){if(n=n||"",e)return n="["+n+"]",$(t).parents(n)[0];for(var r,o=t;o.parentNode;)if(o=o.parentNode,r=o.getAttribute&&o.getAttribute(n))return o}},getIndex:function(n,r,o){if(!n||!r||!o)return 0;if(e)return $("["+n+'="'+r+'"]').index($(o))+1;if(document.querySelectorAll){var i=document.querySelectorAll("["+n+'="'+r+'"]');return t(i,o)}return 1},getElemIndex:function(n,r,o){if(!n||!r||!o)return 0;if(e)return $(n).find(r).index($(o))+1;if(n.querySelectorAll){var i=n.querySelectorAll(r);return t(i,o)}return 1},is:function(e,t){return e&&t?(e.length&&(e=e[0]),e.nodeName.toLowerCase()===t.toLowerCase()?!0:void 0):!1}};o.jq=n}();var u=1001,c={},d={getIEVersion:function(){var e,t=-1,n=navigator.userAgent;return"Microsoft Internet Explorer"==navigator.appName?(e=new RegExp("MSIE ([0-9]{1,}[.0-9]{0,})"),null!==e.exec(n)&&(t=parseFloat(RegExp.$1))):"Netscape"==navigator.appName&&(e=new RegExp("Trident/.*rv:([0-9]{1,}[.0-9]{0,})"),null!==e.exec(n)&&(t=parseFloat(RegExp.$1))),t},stringify:function(e){if("undefined"!=typeof JSON)return JSON.stringify(e);var t=typeof e;if("object"!=t||null===e)return"string"==t&&(e='"'+e+'"'),String(e);var n,r,o=[],i=e&&e.constructor==Array;for(n in e)r=e[n],t=typeof r,e.hasOwnProperty(n)&&("string"==t?r='"'+r+'"':"object"==t&&null!==r&&(r=d.stringify(r)),o.push((i?"":'"'+n+'":')+String(r)));return(i?"[":"{")+String(o)+(i?"]":"}")},isArray:function(e){return"[object Array]"==Object.prototype.toString.call(e)},getCookieInArray:function(e){for(var t=0,n=e.length;n>t;t++){var r=d.getCookie(e[t]);if(r)return r}return""},getCookieOrFunc:function(e){return"function"==typeof e?d.getValue(e):d.getCookie(e)},getCookie:function(e){if(d.isArray(e))return d.getCookieInArray(e);var t=document.cookie.match(new RegExp("(^| )"+e+"=([^;]*)(;|$)"));return null!==t?decodeURIComponent(t[2]):""},getQuery:function(e,t){void 0===t&&(t=location.search),t=t.split("#")[0];var n="(^|&|\\?)"+e+"=([^&]*)(&|$)",r=new RegExp(n,"i"),o=t.substr(1).match(r);return null!==o?decodeURIComponent(o[2]):""},setQuery:function(e,t,n){var r=new RegExp("([?&])"+t+"=.*?(&|$)","i"),o=-1!==e.indexOf("?")?"&":"?";return e.match(r)?e.replace(r,"$1"+t+"="+n+"$2"):e+o+t+"="+n},getTime:function(){return parseInt((new Date).getTime()/1e3)},registerEvent:function(e,t,n){window.attachEvent?e.attachEvent("on"+t,n):e.addEventListener(t,n,!1)},extend:function(){for(var e=arguments,t=arguments[0],n=1;n<e.length;n++){var r=e[n];for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t},getValue:function(e){if(e){if("function"==typeof e)try{var t=Array.prototype.slice.call(arguments,1);return e.apply(null,t)}catch(n){return console.log(a+n),""}return e}},loadScript:function(e,t){if(window["callback_"+u]=function(e){t&&t(e)},e+="?callback=callback_"+u,u+=1,o._xcore)window.loader.script(e);else{var n=document.createElement("script");n.src=e;var r=document.getElementsByTagName("head")[0];r&&r.appendChild(n)}},listenTo:function(e,t){c[e]||(c[e]=[]),c[e].push(t)},fire:function(e){var t=c[e];if(t&&t.length){for(var n=0,r=t.length;r>n;n++)t[n].call();c[e]=[]}},hasKey:function(e){if(!e)return!1;for(var t in e)if(e.hasOwnProperty(t))return!0;return!1}};o.util=d;var f="https:"===location.protocol?"https:":"http:",p="mogujie";-1!=location.host.indexOf("meilishuo")&&(p="meilishuo"),o.config={LogUrl:f+"//log.juangua.com/log.php",LogMoGuJsUrl:f+"//log.juangua.com/mogu.js",CookieUrl:f+"//portal."+p+".com/api/util/getUuid",shouldRequestCookie:function(){if(-1!=location.protocol.indexOf("file:"))return!1;var e=o.util.getCookieOrFunc(o.config.uuid);return!e},uuid:["__mgjuuid","__xduuid"],uid:"__ud_",sfrom:"from_site",cpsinfo:"__cpsinfo",ptp_cnt_a:"",ptp_cnt_b:"",ptp_cnt_c_d:"",platform:function(){var e=navigator.userAgent.toLowerCase();return/qq\/([\d\.]+)/.test(e)?48:void 0},pEventId:"1001",isMobileRe:/iphone|android|ipad/i,ptpRe:/[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+\.[a-z0-9]+/i,hrefRe:/http[s]?:\/\/\w+\.(mogujie|xiaodian|uniny)\.com([\/]|\/.*|)$/,mgjRe:/mgj:\/\//,mtRe:/\?.*[&]?mt=([^\.]+)\.([^\.]+)\.([^\.&#]+)/,chasing:["f","f2","mlf"],urlExtend:["acm"],urlExtendFn:function(e){},extra:{},isNativeRe:/mogujie(?!nonative)/i,nativeLog:{}},t.prototype={rand:function(e){var t,n="";for(t=0;e>t;t++)n+=this.arr.charAt(Math.random()*this.arrLen);return n},pageHash:function(e){var t=5381,n=e.length-1;if("string"==typeof e)for(;n>-1;n--)t+=(t<<5)+e.charCodeAt(n);else for(;n>-1;n--)t+=(t<<5)+e[n];var r=2147483647&t,o="";do o+=this.arr.charAt(61&r);while(r>>=6);return o}},function(){var e=o.config,t=navigator.userAgent.toLocaleLowerCase();o.info={isApp:e.isNativeRe.test(t),isNative:e.isNativeRe.test(t),isMobile:e.isMobileRe.test(t),isIos:t.indexOf("iphone")>-1,isAndroid:t.indexOf("android")>-1,isXd:location.href.indexOf(".xiaodian.")>-1}}(),function(){function e(){var e="1";return g.isMobile&&(e="m1"),g.isIos&&g.isNative?e="am0":g.isAndroid&&g.isNative&&(e="am1"),e}function n(){var e=d.getValue(s.ptp_cnt_b);if(e)return e;var t="",n=location.href.split("?")[0];return t=v.pageHash(n)}function r(){var e=d.getCookieOrFunc(s.cpsinfo);return e?e=e.replace("-",","):""}function i(){var e=d.getValue(s.platform);return e?e:g.isMobile?32:31}function a(e){if(e){var t=d.getValue(s.urlExtendFn,e);return d.hasKey(t)?t:void 0}}function u(e){if(e){e.length&&(e=e[0]);var t=d.getValue(s.ptp_cnt_c_d,e);if(t)return t;var n=e.getAttribute("data-ptp-customc");if(n)return{c:n,d:l.getIndex("data-ptp-customc",n,e)};if(e=l.getParents(e,"data-ptp-customc"))return n=e.getAttribute("data-ptp-customc"),n?{c:n,d:l.getIndex("data-ptp-customc",n,e)}:void 0}}function c(){return window.PTP_PARAMS&&d.extend(s,PTP_PARAMS),{time:d.getTime(),sfrom:d.getCookieOrFunc(s.sfrom),uuid:d.getCookieOrFunc(s.uuid),uid:d.getCookieOrFunc(s.uid),cpsinfo:r(),refer:location.href,rerefer:document.referrer,ptp_url:d.getQuery("ptp",location.search),ptp_ref:d.getQuery("ptp",document.referrer),_notNative:!g.isNative}}function f(){h.a=e(),h.b=n(),h.c=0,h.d=0}var p,s=o.config,g=o.info,l=o.jq,v=new t,m=c(),h={a:e(),b:n(),c:0,d:0,e:s.ptp_cnt_e?s.ptp_cnt_e:v.rand(5)};o.ptp=p={getPtpByType:function(e,t){var n=i(),r=[m.time,0,"p/e",n,o.version,"1001",m.uuid,m.uid,m.refer,m.rerefer];return"p"==e?(t=t||"1001",r[2]="p",r[5]=t,r):"e"==e?(t=t||"50001",r[2]="e",r[5]=t,r):void 0},getPtpCnt:function(e,t){return e||(e=h.c),t||(t=h.d),[h.a,h.b,e,t,h.e].join(".")},getPtpInfo:function(){var e={};return d.extend(e,m,{ptp_cnt:p.getPtpCnt()})},getPtpInfoAndExtra:function(){var e=p.getPtpInfo(),t={};if(s.extra)for(var n in s.extra)s.extra.hasOwnProperty(n)&&(t[n]=d.getValue(s.extra[n]));return d.extend(e,t)},createPtpCnt:function(e){var t=u(e),n=0,r=0;if(t)return p.getPtpCnt(t.c,t.d);var o=l.getParents(e,"data-ptp"),i=l.getParentByClass(e,"data-ptp-item");return o&&(n=o.getAttribute("data-ptp"),r=i?l.getElemIndex(o,".data-ptp-item",i):l.getElemIndex(o,"a",e)),r||(r=0),p.getPtpCnt(n,r)},makeUrl:function(e,t,n){var r=e.match(/(#.+)$/);return e=e.replace(/(#.+)$/,""),e=d.setQuery(e,"ptp",t),e=p.getChasingParams(e),e=p.getExtendParams(n,e),r&&(e+=r[1]),e},getChasingParams:function(e){void 0===e&&(e="");var t=e;if(!s.chasing)return t;s.chasing.length||(s.chasing=[s.chasing]);for(var n,r,o=0,i=s.chasing.length;i>o;o++)n=s.chasing[o],r=d.getQuery(n),r&&(t=d.setQuery(t,n,r));for(var a=location.search.split("#")[0],u=/[\?&](_f_[^=]+)=([^&]+)/g,c=u.exec(a);c&&3==c.length;)t=d.setQuery(t,c[1],c[2]),c=u.exec(a);return t},getExtendParams:function(e,t){var n=t;if(!e||!l.is(e,"a"))return n;var r=a(e);if(r)for(var o in r)r.hasOwnProperty(o)&&(n=d.setQuery(n,o,r[o]));else{e.length&&(e=e[0]);for(var i=s.urlExtend||[],u=0,c=i.length;c>u;u++){var f=i[u],p=e.getAttribute("data-ext-"+f);p&&(n=d.setQuery(n,f,p))}}return n},refreshPtp:function(){m=c(),f()},refreshE:function(){h&&(h.e=v.rand(5))},refreshCookie:function(){m&&(m.sfrom=d.getCookieOrFunc(s.sfrom),m.uuid=d.getCookieOrFunc(s.uuid),m.uid=d.getCookieOrFunc(s.uid),m.cpsinfo=r())}}}(),function(){var e=o.info,t=o.ptp,n=o.config,r=0,i=function(e,t){t=t||{};var n=[];for(var r in t){var o=t[r];o||(o=""),o=encodeURIComponent(o),n.push(r+"="+o)}n=n.join("&"),e=e.indexOf("?")>-1?e+"&"+n:e+"?"+n;var i=new Image;i.src=e},u=function(e,t){t=t||{};var n,o=r++;try{n=document.createElement('<iframe name="'+o+'">')}catch(i){n=document.createElement("iframe"),n.setAttribute("name",o)}try{n.style.display="none",document.body.appendChild(n),n.contentWindow.name=o;var u=document.createElement("form");u.setAttribute("method","POST"),u.setAttribute("action",e),u.setAttribute("target",o);for(var c in t)if(t.hasOwnProperty(c)){var f=document.createElement("input");f.setAttribute("type","hidden"),f.setAttribute("name",c),f.setAttribute("value",t[c]),u.appendChild(f)}document.body.appendChild(u),u.submit(),d.registerEvent(n,"load",function(){try{document.body.removeChild(u),document.body.removeChild(n)}catch(e){}})}catch(i){console.log(a+i)}},c={sendLog:function(e,t,n){var r=d.getIEVersion(),o=-1!=r&&8>=r;o&&!n?u(e,t):i(e,t)},sendAppLog:function(e,t){return e+="",n.nativeLog&&n.nativeLog.logE?n.nativeLog.logE(e,t):void(window.hdp&&window.hdp["do"]?hdp["do"]("mgj.tracker.sendEvent",e,t):document.addEventListener("deviceready",function(){window.mgj&&mgj.tracker&&mgj.tracker.sendEvent&&mgj.tracker.sendEvent(e,t)},!1))},logAppPevent:function(e){return n.nativeLog&&n.nativeLog.logP?n.nativeLog.logP(e):void(window.hdp&&window.hdp["do"]?hdp["do"]("mgj.pevent",e).then(function(){},function(e){console.log("pevent:"+e)}):document.addEventListener("deviceready",function(){window.mgj&&mgj.pevent&&mgj.pevent(function(){},null,e)},!1))},logData:function(r,o,i){var a=t.getPtpByType(r,o);a.push(d.stringify(i)),e.isNative?c.sendAppLog(o,i):c.sendLog(n.LogUrl,{v:1,data:a.join("	")})}};o.send=c}(),function(){function e(e){var t=e.href;if(!(t.indexOf("mogujie.com/mtalk/")>-1)&&(r.hrefRe.test(t)||r.mgjRe.test(t))){var n=e.getAttribute("data-ptp-cache-id");t=e.getAttribute("href"),n&&r.ptpRe.test(n)||(n=i.createPtpCnt(e),e.setAttribute("data-ptp-cache-id",n)),e.href=i.makeUrl(t,n,e)}}function t(e){if(e.getAttribute){var t=e.getAttribute("href");if(null==t||0===t.indexOf("#"))return!1}return!0}function n(n){var r=n||window.event,o=r.target||r.srcElement,i=a.getA(o),u="AREA"===o.nodeName?o:null;u&&(i=u),i&&(i.href&&i.href.indexOf("javascript:")>-1||t(i)&&e(i))}var r=o.config,i=o.ptp,a=o.jq;if(!o._xcore){var u="tap"in document.createElement("div")?"tap":"mousedown";d.registerEvent(document,u,n),d.registerEvent(document,"touchstart",n)}}();var s=o.ptp,g=o.config,l=o.send,v=!g.shouldRequestCookie();v||d.loadScript(g.CookieUrl,function(){v=!0,o.ptp.refreshCookie(),d.fire("LoggerReady")}),o.ready(function(){o.ptp.refreshPtp(),r()}),o.refreshPevent=function(){o.ready(function(){o.ptp.refreshPtp(),o.ptp.refreshE(),r()})},o.log=function(e,t){void 0!==e&&(t=t||{},o.ready(function(){var n=s.getPtpInfoAndExtra();v?o.send.logData("e",e,d.extend({},n,t)):d.listenTo("LoggerReady",function(){var n=s.getPtpInfoAndExtra();o.send.logData("e",e,d.extend({},n,t))}),window.MtaH5&&MtaH5.clickStat&&MtaH5.clickStat(e,t)}))},o.generatePtpParams=function(e,t){if(void 0!==e){var n="";return n=t?s.createPtpCnt(t):s.getPtpCnt(),s.makeUrl(e,n,t)}},"undefined"!=typeof module&&"object"==typeof exports?module.exports=o:"function"==typeof define&&(define.amd||define.cmd)&&define("logger",function(){return o})}}(window);!function(){"use strict";function n(){for(var n=arguments,e=arguments[0],t=arguments.length,r=1;t>r;r++){var i=n[r];for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}return e}function e(n){return"function"!=typeof n?n:n()}function t(n){n=n||location.href;var t=e(b.customUrl);return t?t=t.split("https://").join("").split("http://").join(""):("string"==typeof n&&(n=n.split("?")[0].split("#")[0].split("https://").join("").split("http://").join(""),"/"===n.charAt(n.length-1)&&(n=n.substr(0,n.length-1))),n)}function r(n,e,t){if("function"==typeof Array.prototype.map)return n.map(e,t);for(var r=new Array(n.length),i=0;i<n.length;i++)r[i]=e.call(t,n[i]);return r}function i(n,e,t){if("function"==typeof Array.prototype.filter)return n.filter(e,t);for(var r=[],i=0;i<n.length;i++)e.call(t,n[i])&&r.push(n[i]);return r}function o(n,e){if("function"==typeof Array.prototype.indexOf)return n.indexOf(e);for(var t=0;t<n.length;t++)if(n[t]===e)return t;return-1}function a(){var n=navigator.userAgent.toLowerCase();return/iphone|android|ipad/i.test(n)?"h5":"pc"}function s(){var n,e,t=navigator.userAgent,r="\u5176\u5b83",i=r,o="",a="";return-1!==(n=t.indexOf("Opera"))&&(i="Opera",o=t.substring(n+6),-1!==(n=t.indexOf("Version"))&&(o=t.substring(n+8))),-1!==(n=t.indexOf("OPR"))?(i="Opera",o=t.substring(n+4)):-1!==t.indexOf("MicroMessenger")?i="Wechat":-1!==t.indexOf("QQ")?i="QQ":-1!==(n=t.indexOf("MSIE"))?(i="IE",o=t.substring(n+5)):-1!==(n=t.indexOf("Chrome"))?(i="Chrome",o=t.substring(n+7)):-1!==(n=t.indexOf("Firefox"))?(i="Firefox",o=t.substring(n+8)):-1!==t.indexOf("Trident/")?(i="IE",o=t.substring(t.indexOf("rv:")+3)):-1===(n=t.indexOf("Safari"))&&-1===t.indexOf("iPhone")||(i="Safari",o=t.substring(n+7),-1!==(n=t.indexOf("Version"))&&(o=t.substring(n+8))),-1!==(e=o.indexOf(";"))&&(o=o.substring(0,e)),-1!==(e=o.indexOf(" "))&&(o=o.substring(0,e)),-1!==(e=o.indexOf(")"))&&(o=o.substring(0,e)),o&&(a=parseInt(""+o,10),isNaN(a)&&(o=""+parseFloat(navigator.appVersion),a=parseInt(navigator.appVersion,10))),a?i+"_"+a:i+"_unknown"}function c(){var n="\u5176\u5b83",e=n,t=navigator.userAgent,r=[{s:"Windows 10",r:/(Windows 10.0|Windows NT 10.0)/},{s:"Windows 8.1",r:/(Windows 8.1|Windows NT 6.3)/},{s:"Windows 8",r:/(Windows 8|Windows NT 6.2)/},{s:"Windows 7",r:/(Windows 7|Windows NT 6.1)/},{s:"Windows Vista",r:/Windows NT 6.0/},{s:"Windows Server 2003",r:/Windows NT 5.2/},{s:"Windows XP",r:/(Windows NT 5.1|Windows XP)/},{s:"Windows 2000",r:/(Windows NT 5.0|Windows 2000)/},{s:"Windows ME",r:/(Win 9x 4.90|Windows ME)/},{s:"Windows 98",r:/(Windows 98|Win98)/},{s:"Windows 95",r:/(Windows 95|Win95|Windows_95)/},{s:"Windows NT 4.0",r:/(Windows NT 4.0|WinNT4.0|WinNT|Windows NT)/},{s:"Windows CE",r:/Windows CE/},{s:"Windows 3.11",r:/Win16/},{s:"Android",r:/Android/},{s:"Open BSD",r:/OpenBSD/},{s:"Sun OS",r:/SunOS/},{s:"Linux",r:/(Linux|X11)/},{s:"iOS",r:/(iPhone|iPad|iPod)/},{s:"Mac OS X",r:/Mac OS X/},{s:"Mac OS",r:/(MacPPC|MacIntel|Mac_PowerPC|Macintosh)/},{s:"QNX",r:/QNX/},{s:"UNIX",r:/UNIX/},{s:"BeOS",r:/BeOS/},{s:"OS/2",r:/OS\/2/},{s:"Search Bot",r:/(nuhk|Googlebot|Yammybot|Openbot|Slurp|MSNBot|Ask Jeeves\/Teoma|ia_archiver)/}];for(var i in r){var o=r[i];if(o.r.test(t)){e=o.s;break}}var a=n;switch(/Windows/.test(e)&&(a=/Windows (.*)/.exec(e)[1],e="Windows"),e){case"Mac OS X":a="";break;case"Android":var s=/Android( |\/)([\.\_\d]+)/.exec(t);if(s&&s.length>0){var c=(s[2]||"").split(".").slice(0,2);a=c.join(".")}break;case"iOS":a=/OS (\d+)_(\d+)_?(\d+)?/.exec(t),a&&a.length>0&&(a=a[1]+"."+a[2])}return e===n?e:e+a}function d(){var n,e,t=window.screen,r="";return t&&t.width&&(n=t.width?t.width:"",e=t.height?t.height:"",r+=""+n+"x"+e),r}function f(){var n=(window.devicePixelRatio?window.devicePixelRatio:1)-0;return n.toFixed(1)}function u(){return{platform:a(),screen:d(),os:c(),browser:s(),devicePixelRatio:f()}}function l(){var n=window.performance&&window.performance.timing;if(!n)return{};var t=window[b.blankTime];t||(t=n.domContentLoadedEventStart);var r={dns:n.domainLookupEnd-n.domainLookupStart,tcp:n.connectEnd-n.connectStart,request:n.responseStart-n.requestStart,response:n.responseEnd-n.responseStart,domContentLoad:n.domContentLoadedEventEnd-n.navigationStart,blankTime:t-n.navigationStart,readyTime:n.domInteractive-n.navigationStart,onloadTime:n.loadEventEnd-n.navigationStart,extraTime:e(b.getExtraTime)||0};return r}function p(){var e=u(),r=l();r.formatUrl=t();var i=window.logger;i&&i.log&&i.log("016000001",n({},e,r))}function w(n,e,t,r){for(var i=!0,o=0;o<A.length;o++){var a=A[o]||{};if(a.msg===n&&a.file===e&&a.line===t&&a.col===r){i=!1;break}}return i}function v(n,e,r,i,o){if(w(n,e,r,i)){var a="";if(o){if(o.hasReported)return;a=o.stack||""}A.push({msg:n,file:e,line:r,col:i});var s=window.logger;if(s&&s.log){"string"!=typeof a&&(a=""+a);var c={type:0,msg:n,stack:a,ua:navigator.userAgent,formatUrl:t()};try{JSON.stringify(c),s.log("016000011",c)}catch(o){}}}}function g(n){return n?j.test(n)?!0:"cannot convert undefined or null to object"===n.toLowerCase():!1}function h(n,e){if(!n)return null;var t={};if("object"==typeof n?(t.msg=n.message||"",t.stack=n.stack||"",t.stack=t.stack,"string"!=typeof t.stack&&(t.stack=""+t.stack)):t.msg=n,t.ua=navigator.userAgent,t.type=1,g(t.msg)&&"object"==typeof n&&n.stack)try{t.msg=I.parse(n)}catch(r){}return t}function m(){var n=navigator.userAgent.toLowerCase();return-1!==n.indexOf("msie")?parseInt(n.split("msie")[1],10):!1}function y(n){"string"==typeof n&&(n=new Error(n)),n.hasReported||(n.hasReported=!0,L.sendMsg(n,null,!0))}function O(n){return"function"!=typeof n.apply?n:function(){try{return n.apply(this,arguments)}catch(e){throw y(e),console&&console.warn&&console.warn(e),e}}}function x(n){return n&&"function"==typeof n.apply?function(){for(var e,t=arguments,r=[],i=0,o=arguments.length;o>i;i++)e=t[i],"function"==typeof e&&(e=O(t[i])),r.push(e);return n.apply(this,r)}:n}function W(n,e){for(var t in e)n[t]=e[t]}function S(){var n=window.$;if(n&&(n===window.jQuery||n===window.Zepto)){var e=n.fn.ready;n.fn.ready=x(e);var t=n.ajax;"function"==typeof t&&"function"==typeof t.apply&&(n.ajax=function(e,r){var i=null;return"undefined"==typeof r&&"object"==typeof e?i=e:"object"==typeof r&&(i=r),i&&("function"==typeof i.success&&(i.success=O(i.success)),"function"==typeof i.complete&&(i.complete=O(i.complete))),t.apply(n,arguments)});var r=n.Deferred;"function"==typeof r&&"function"==typeof r.apply&&(n.Deferred=function(){var n=r.apply(this,arguments),e=n.resolveWith;return n.resolveWith=O(e),n})}}function E(){var n=window.require,e=window.define;e&&e.amd&&n&&(window.require=x(n),W(window.require,n),window.define=x(e),W(window.define,e))}function T(){var n=window.setTimeout;window.setTimeout=function(e,t){switch("function"==typeof e&&(e=O(e)),arguments.length){case 0:return n();case 1:return n(e);default:return n(e,t)}};var e=window.setInterval;window.setInterval=x(e);var t=window.requestAnimationFrame;"function"==typeof t&&(window.requestAnimationFrame=x(t));var r=window.Promise;if("undefined"!=typeof r){var i=r.prototype.then;window.Promise.prototype.then=x(i)}if(window.EventTarget&&window.EventTarget.prototype.addEventListener){var o=window.EventTarget.prototype.addEventListener;window.EventTarget.prototype.addEventListener=function(n,e,t){return e&&"function"==typeof e.handleEvent?(e.handleEvent=O(e.handleEvent),o.call(this,n,e,t)):(e.___wrapper||(e.___wrapper=O(e)),o.call(this,n,e.___wrapper,t))};var a=window.EventTarget.prototype.removeEventListener;window.EventTarget.prototype.removeEventListener=function(n,e,t){return e?a.call(this,n,e.___wrapper||e,t):a.call(this,n,e,t)}}}var b={customUrl:function(){},getExtraTime:function(){return 0},blankTime:"__trace__headendt"},N=/^\s*at .*(\S+\:\d+|\(native\))/m,k=/^(eval@)?(\[native code\])?$/,_={parse:function(n){return n.stack&&n.stack.match(N)?this.parseV8OrIE(n):n.stack?this.parseFFOrSafari(n):[]},extractLocation:function(n){if(-1===n.indexOf(":"))return[n];var e=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,t=e.exec(n.replace(/[\(\)]/g,""));return[t[1],t[2]||void 0,t[3]||void 0]},parseV8OrIE:function(n){var e=i(n.stack.split("\n"),function(n){return!!n.match(N)},this);return r(e,function(n){n.indexOf("(eval ")>-1&&(n=n.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var e=n.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),t=this.extractLocation(e.pop()),r=e.join(" ")||void 0,i=o(["eval","<anonymous>"],t[0])>-1?void 0:t[0];return{functionName:r,filename:i,row:t[1],column:t[2],line:n}},this)},parseFFOrSafari:function(n){var e=i(n.stack.split("\n"),function(n){return!n.match(k)},this);return r(e,function(n){if(n.indexOf(" > eval")>-1&&(n=n.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===n.indexOf("@")&&-1===n.indexOf(":"))return{functionName:n};var e=n.split("@"),t=this.extractLocation(e.pop()),r=e.join("@")||void 0;return{functionName:r,filename:t[0],row:t[1],column:t[2],line:n}},this)}},I={ErrorStackParser:_,parse:function(n){var e=_.parse(n);if(!e||e.length<=0)return n.message;var t=e[0],r=[];if(t.filename){var i=t.filename;i.lastIndexOf("/")>-1&&(i=t.filename.slice(t.filename.lastIndexOf("/"))),r.push(i)}return t.functionName&&r.push("@"+t.functionName),t.row&&r.push(" "+t.row),n.message+" - "+r.join("")},normalize:function(n){var e=_.parse(n);return e}},A=[],j=/^\s*('?undefined'?|object|null) is not (a function|an object)\s*$/i,L={init:function(){var n=setInterval(function(){var e=window.performance&&window.performance.timing;e&&0===e.loadEventEnd||(clearInterval(n),setTimeout(function(){p()},10))},300);window.onerror=v},sendMsg:function(e,r,i){void 0===r&&(r=null),void 0===i&&(i=!1);var o=h(e,i),a=window.logger;if(o&&a&&a.log){var s="";if(r)try{if(s=JSON.stringify(r),s.length>1024)throw new Error("extra contains too much information")}catch(c){s="",console&&console.warn&&console.warn(c)}n(o,{formatUrl:t(),extra:s});try{JSON.stringify(o),a.log("016000011",o)}catch(d){}}}},M={init:function(){m()&&m()<9||(S(),E(),T())}};window._trace&&console&&console.warn&&console.warn("WARNING: you already import trace"),"undefined"==typeof window.console&&(window.console={log:function(){},warn:function(){}}),L.init(),M.init();var P=(window._trace={send:function(){},sendImmediately:function(){},version:"1.1.7",config:b,sendMsg:L.sendMsg},{});return P}();!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("pc/common/header/index",[],e):"object"==typeof exports?exports["pc/common/header/index"]=e():t["pc/common/header/index"]=e()}(this,function(){return function(t){function e(o){if(n[o])return n[o].exports;var i=n[o]={exports:{},id:o,loaded:!1};return t[o].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";n(1)},function(t,e,n){var o,i;o=[],i=function(){function t(t,e){this.init(t,e)}function e(){function t(t){return $.trim(t).replace(/(<|>|'|"|window|alert|eval|$|jQuery)/gi,"")}r.on("keyup keydown",function(n){var o=$(this),i=$("#select_type");if(!i.length||"bao"===i.val()||"5"===i.val())switch(n.keyCode){case 40:if("keyup"==n.type||!a.data("isshow"))break;f.chooseIndex=f.chooseIndex+1>f.tipLength-1?0:++f.chooseIndex;var l=m.changeListTab(f.chooseIndex);r.val(l);break;case 38:if("keyup"==n.type||!a.data("isshow"))break;f.chooseIndex=f.chooseIndex-1<0?f.tipLength-1:--f.chooseIndex;var l=m.changeListTab(f.chooseIndex);r.val(l);break;case 13:if("keyup"==n.type)break;n.preventDefault(),e.submitBefore(f.chooseType,f.chooseIndex),c.submit();break;case 37:break;case 39:break;default:clearTimeout(s),s=setTimeout(function(){var e=t(o.val());m.resetFactory(e)},500)}}).on("focus",function(){var e=$(this),n=$("#select_type");if(s&&clearTimeout(s),!n.length||"bao"===n.val()||"5"===n.val()){var o=t(e.val());clearTimeout(s),s=setTimeout(function(){m.resetFactory(o)},300)}}).on("blur",function(){$("body").bind("click",function(t){$(t.target).parents(".seatch_type_msearch").length||(a.empty().data("isshow",!0).hide(),$("body").unbind("click"))})}),a.on("mouseenter",".search_tip li",function(t){var e=$(this),n=e.index();f.chooseIndex=n,m.changeListTab(n)}).on("click",".search_tip li",function(t){var n=$(this).find(".title").text();$(t.target).hasClass("prop")&&(n+=" "+$(t.target).text()),e.submitBefore(f.chooseType,f.chooseIndex),r.val(n),c.submit()}),a.on("click",".hot_list li",function(){var t=$(this);return e.submitBefore(m.hotTypeName,t.index()),r.val(t.find("span").html()),c.submit(),!1}),a.on("click",".local_del",function(t){var e=$(this),n=e.parent();d.del(n.find(".title").attr("title"));var o=d.getTenItem();return m.updateLocalContent(e,o),f.chooseIndex=-1,f.tipLength=o.length,!1}).on("click",".local_title .del_all",function(){var t=$(this);return d.set(),m.destoryLocalContent(t),t.remove(),f.chooseIndex=-1,f.tipLength=0,!1}),i.on("click",".selectbox a",function(t){t.preventDefault(),m.changeType($(this))}).on("mouseenter",".selectbox",function(){a.hide(),$(this).addClass("sele_hover")}).on("mouseleave",".selectbox",function(){$(this).removeClass("sele_hover")}),c.submit(function(){var n=$(this),o=t(r.val()),i=r.attr("def-v");if(""==o||o==i){if(""==o&&"shop"==$("#select_type").val())return!1;var s=r.data("def");r.val(s||"");var a='<input type="hidden" name="from" value="searchplacehold" id="TJ">';$("#top_nav_form").append(a),setTimeout(function(){$("#TJ").remove()},1e3)}else o==$.trim(r.val())&&"bao"==$("#select_type").val()&&d.addOne(o);if(c.find(".emptyvalue").remove(),n.data("index")>-1&&null!==n.data("type")){var l='<input type="hidden" class="emptyvalue" name="from" value="'+n.data("type")+"querytip"+n.data("index")+'">';c.append(l)}m.destoryContent(),e.submitAfter()}),m.showStickySearch()&&m.initStickySearch()}var n=MoGu.ui.getdoT(),o=MoGu.util.getStore();if(n&&o){$(".store_header").length;var i=$("#nav_search_form");if(i.length){var s,a=$(".top_search_hint"),r=i.find(".ts_txt"),c=$("#top_nav_form"),l=$("#select_type"),h=i.find(".selectbox"),p="/msearch/tips/item",u={nowHost:window.location.host,defultHost:"http://www.mogujie.com",template:'<div class="search_tip_box fl">{{=it.searchResult}}</div>',listItemTemp:['<div class="mr300 tip_wrap">','{{ if(it.titleName && it.titleName != ""){ }}','<h3 class="search_tip_title">{{=it.titleName}}</h3>',"{{ }else{ }}","{{ } }}",'<ul class="search_tip">',"{{~it.items :item:index}}","{{ if(index < 10){ }}","<li>",'<a href="javascript:;" class="title" title="{{= item.title }}" >{{= item.title }}</a>',"{{~item.props :prop: i}}",'<span class="prop">{{= prop }}</span>',"{{~}}","</li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),localItemTemp:['<div class="mr300 tip_wrap">','<h3 class="search_tip_title local_title clearfix">',"{{ if(it.items.length){ }}",'<span class="del_all">\u5220\u9664</span>',"{{ } }}","\u5386\u53f2\u8bb0\u5f55","</h3>",'<ul class="search_tip">',"{{~it.items :item:index}}","{{ if(index < 10){ }}",'<li class="local_item">','<a href="javascript:;" class="title" title="{{=item}}" >{{=item}}</a>',"{{~item.props :prop: i}}",'<span class="prop">{{= prop }}</span>',"{{~}}",'<span class="nums local_del">x</span>',"</li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),hotKeyTpl:['<div class="search_hot_wrap">','<h3 class="search_tip_title hot_title">\u70ed\u95e8\u5173\u952e\u8bcd</h3>','<ul class="hot_list clearfix">',"{{~it.items :item:index}}","{{ if(index < 10){ }}","<li><span>{{= item.title }}</span></li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),emptyTpl:['<div class="mr300 tip_wrap">','<p class="tip_none">\u6682\u65e0\u76f8\u5173\u70ed\u95e8\u5173\u952e\u8bcd</p>',"</div>"].join("")},d={keyName:"_search_local_history",keyShowName:"_search_local_history_show",maxLength:20,showLength:10,isshow:function(){return!0},abtest:function(t){o.set(this.keyShowName,1)},get:function(){return o.get(this.keyName)||[]},getTenItem:function(){var t=this.get();return t.slice(0,this.showLength)},set:function(t){o.set(this.keyName,t||[])},addOne:function(t){if(t=$.trim(t),""!=t){var e=this.get(),n=$.inArray(t,e);-1==n?(e.unshift(t),e.length>this.maxLength&&e.pop()):(e.splice(n,1),e.unshift(t)),this.set(e)}},del:function(t){t=$.trim(t);var e=this.get(),n=$.inArray(t,e);n>-1&&(e.splice(n,1),this.set(e))}};t.prototype.init=function(t,e){this.chooseIndex=-1,this.chooseType=t,this.tipLength=e||0};var f=new t("undefined"),m={ajaxRequest:null,hotKeyArr:[],isShopHost:function(){return!1},showStickySearch:function(){var t=location.pathname,e=$(".mgj_primary"),n=e.length>0?e.offset().top+e.height():10;return"www.mogujie.com"===location.host&&("/"===t||"/more"===t)||t.indexOf("/book/search/")>-1||/webdemo || localhost/.test(location.host)&&/sticky/.test(location.search)?(t.indexOf("/book/search/")>-1&&(e=$(".search_filter_wrap"),n=e.length?e.offset().top:150),this.stickyTargetTop=n,!0):!1},resetFactory:function(t){this.isShopHost()?this.resetShopContent(t):d.isshow()?this.resetListContent(t):this.resetOldContent(t)},resetListContent:function(e){function o(t){i(function(){s()})}function i(n){r.ajaxRequest&&r.ajaxRequest.abort();var o=d.getTenItem();return""==$.trim(e)?(c.push(r.renderLocalContent(o)),void($.isFunction(n)&&n())):void(r.ajaxRequest=$.post(p,{input:e},function(e){if(e&&1001==e.status.code){var o=e.result.tipCount;0==o?c.push(r.renderEmptyContent()):(c.push(r.renderSearchContent(e.result.tips,e.result.nums,e.result.props)),f=new t(r.searchTypeName,o))}$.isFunction(n)&&n()},"json"))}function s(){var t=n.template(u.template)({searchResult:c.join("")});a.html(t),r.showContentBox()}var r=this,c=[];r.hotKeyArr.length?o(r.hotKeyArr):$.post(p,{},function(t){r.hotKeyArr=t.result.tips,o(r.hotKeyArr)},"json")},resetShopContent:function(e){function o(n){s.ajaxRequest&&s.ajaxRequest.abort(),s.ajaxRequest=$.post(p,{input:e},function(e){if(e&&1001==e.status.code){var o=e.result.tipCount;0==o?r.push(s.renderEmptyContent()):(r.push(s.renderSearchContent(e.result.tips,e.result.nums,e.result.props,c)),f=new t(l,o))}$.isFunction(n)&&n()},"json")}function i(){var t=n.template(u.template)({searchResult:r.join("")});a.html(t),s.showContentBox()}var s=this,r=[],c="",l=""!=e?s.searchTypeName:s.hotTypeName;o(function(){i()})},resetOldContent:function(e){function o(n){s.ajaxRequest&&s.ajaxRequest.abort(),s.ajaxRequest=$.post(p,{input:e},function(e){if(e&&1001==e.status.code){var o=e.result.tipCount;0==o?r.push(s.renderEmptyContent()):(r.push(s.renderSearchContent(e.result.tips,e.result.nums,c)),f=new t(l,o))}$.isFunction(n)&&n()},"json")}function i(){var t=n.template(u.template)({searchResult:r.join("")});a.html(t),a.find(".tip_wrap").removeClass("mr300").addClass("mr300_fix"),s.showContentBox()}var s=this,r=[],c=""!=e?"\u641c\u7d22\u7ed3\u679c":"\u70ed\u95e8\u5173\u952e\u8bcd",l=""!=e?s.searchTypeName:s.hotTypeName;o(function(){i()})},searchTypeName:"",renderSearchContent:function(t,e,o,i){for(var s=[],a=0;a<t.length;a++)s.push({title:t[a],props:o[a],num:e[a]});return n.template(u.listItemTemp)({titleName:i||null,items:s})},localTypeName:"local",renderLocalContent:function(t){return n.template(u.localItemTemp)({items:t})},updateLocalContent:function(t,e){var n=t.parent(),o=t.parents(".search_tip");if(n.length&&o.length)if(e.length<d.showLength)n.remove();else{var i=e[d.showLength-1];n.find(".title").attr("title",i).html(i),n.appendTo(o)}},destoryLocalContent:function(t){var e=t.parents(".tip_wrap").find(".search_tip");e.length&&e.empty()},hotTypeName:"default",renderHotContent:function(t){for(var e=[],o=0;o<t.length;o++)e.push({title:t[o]});return n.template(u.hotKeyTpl)({items:e})},renderEmptyContent:function(){return u.emptyTpl},destoryContent:function(){a.empty().hide()},getContentPosition:function(t,e){var n=e.offset(),o=t.data("fixleft"),i=t.data("fixtop");o&&(n.left+=parseInt(o)),i&&(n.top-=parseInt(i));var s=e.width()-34;t.css({left:n.left,top:n.top+e.height()+2,width:s}).addClass("hasposition")},showContentBox:function(){a.show().data("isshow",!0)},changeListTab:function(t){var e=a.find(".search_tip li"),n=e.eq(t);return e.removeClass("checked"),n.addClass("checked"),n.find(".title").text()},changeType:function(t){var e=t.parent(),n=e.attr("data-index"),o=t.text();if(l.val(n),h.find(".selected").text("\u641c"+o),e.siblings("li").removeClass("current"),e.addClass("current"),"shop"==n)r.val()==r.attr("def-v")&&r.val("");else if(""==r.val()){var i=r.attr("def-v");r.val(i)}4==n?"shop.mogujie.com"===u.nowHost?c.attr("action",u.defultHost+"/group/search/"):c.attr("action","/group/search/"):"shop.mogujie.com"===u.nowHost?c.attr("action",u.defultHost+"/search"):c.attr("action","/search/"),h.removeClass("sele_hover")},initStickySearch:function(){var t=$("#nav_search_form"),e=['<div id="J_sticky_container" class="sticky-search-container">','<div class="wrap">','<a rel="nofollow" href="http://www.mogujie.com" class="logo" title="\u8611\u83c7\u8857|\u6211\u7684\u4e70\u624b\u8857">\u8611\u83c7\u8857|\u6211\u7684\u4e70\u624b\u8857</a>','<div class="sticky-search-content"></div>',"</div>","</div>"].join("");$("body").append(e);var n=$(".sticky-search-container");$(window).off("scroll.sticky").on("scroll.sticky",function(){$(document).scrollTop()>m.stickyTargetTop?n.hasClass("lets-rock")||n.find(".sticky-search-content").append(t).end().addClass("lets-rock"):n.hasClass("lets-rock")&&($(".normal-search-content").append($("#nav_search_form")),n.find(".sticky-search-content").empty().end().removeClass("lets-rock"))})}};e.submitBefore=function(t,e){c.data({type:t,index:e})},e.submitAfter=function(){c.removeData("type index"),f.chooseType="undefined",f.chooseIndex=-1};var v=function(){MoGu.util.inputTextHide(r,"ts_high"),"www.mogujie.com"===u.nowHost||h.parents(".store_header").length||c.attr("action",u.defultHost+c.attr("action")),e()};v()}}}.apply(e,o),!(void 0!==i&&(t.exports=i))}])}),"function"==typeof define&&define.amd&&require(["pc/common/header/index"]);!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e(require("core/core")):"function"==typeof define&&define.amd?define("pc/common/leftnav/index",["core/core"],e):"object"==typeof exports?exports["pc/common/leftnav/index"]=e(require("core/core")):t["pc/common/leftnav/index"]=e(t["core/core"])}(this,function(t){return function(t){function e(n){if(a[n])return a[n].exports;var i=a[n]={exports:{},id:n,loaded:!1};return t[n].call(i.exports,i,i.exports,e),i.loaded=!0,i.exports}var a={};return e.m=t,e.c=a,e.p="",e(0)}([function(t,e,a){var n,i;n=[a(1),a(2)],i=function(t){var e={init:function(){this.render()},render:function(){var t=this,e={status:t.getQueryString("status"),orderVisibleStatusCode:t.getQueryString("orderVisibleStatusCode"),orderShowFlag:!!location.pathname.match(/\/order\/list4buyer/),couponShowFlag:!!location.pathname.match(/\/trade\/promotion\/user/),settingsShowFlag:!!location.pathname.match(/\/settings\/avatar|\/settings\/personal/),rightsShowFlag:!!location.pathname.match(/\/trade\/complaint\/list|\/trade\/report\/list4buyer/),safetyShowFlag:!!location.pathname.match(/\/trade\/safety|\/user\/bindtel|\/security\/dc\/manage/),pathname:location.pathname,uk:t.randomWord(!1,40).toLowerCase()};MoGu&&MoGu.fn&&MoGu.fn.getUserData?MoGu.fn.getUserData(function(a,n){a||t.renderView($.extend(n,e))}):t.renderView(e)},renderView:function(e){var a=this;$("#navListWrap").html(MoGu.ui.getTemplate(t,e)),a.setNumbers(),a.bindEvents();var n={marketType:"market_mogujie",source:"1"};$.ajax({data:n,url:"http://promotion.mogujie.com/jsonp/getBuyerResourceTab/2",dataType:"jsonp",success:function(t){if("SUCCESS"==t.returnCode&&t.success){var e='{{? it.tabs }}{{~ it.tabs :item:i}}<li {{? it.pathname == item.pcUrl }}class="c"{{?}}><a href="http://promotion.mogujie.com{{= item.pcUrl}}">{{= item.title }}</a></li>{{~}}{{?}}',a=$.extend(t.data,{pathname:location.pathname});$("#JCouponList").append(MoGu.ui.getTemplate(e,a))}}})},bindEvents:function(){$(".mu_title").on("click",function(){var t=$(this);0===t.find("a").length&&t.parent().toggleClass("mu_expand")})},setNumbers:function(){var t={marketType:"market_mogujie"};$.ajax({data:{data:JSON.stringify(t)},url:"http://order.mogujie.com/api/order/count4buyer",dataType:"jsonp",success:function(t){if("SUCCESS"==t.status.code){var e=t.result;e.unReceivedOrderCount&&$("#unReceivedOrder").text(e.unReceivedOrderCount),e.unpaidOrderCount&&$("#unpaidOrder").text(e.unpaidOrderCount),e.waitingRateOrderCount&&$("#waitingRateOrder").text(e.waitingRateOrderCount),e.recyleOrderCount&&$("#recyleOrder").text(e.recyleOrderCount)}}})},getQueryString:function(t,e){e=null==e?window.location.href:e,e=e.split("#")[0];var a=new RegExp("(^|\\?|&)"+t+"=([^&]*)(\\s|&|$)","i");return a.test(e)?decodeURIComponent(RegExp.$2.replace(/\+/g," ")):""},randomWord:function(t,e,a){var n="",i=e,r=["0","1","2","3","4","5","6","7","8","9","a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t","u","v","w","x","y","z","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];t&&(i=Math.round(Math.random()*(a-e))+e);for(var o=0;i>o;o++){var s=Math.round(Math.random()*(r.length-1));n+=r[s]}return n||""}};window.pub_navlist_wrap_init=e}.apply(e,n),!(void 0!==i&&(t.exports=i))},function(t,e){t.exports='<div class="mu_nav_wrap">\n    <div class="mu_nav_info">\n        <div class="mu_nav_info_avatar">\n            <div class="mu_nav_info_avatar_mk"></div>\n            <img src="{{? it.avatar&&it.avatar.length>0 }} {{= it.avatar}} {{??}}http://s17.mogucdn.com/avatar/avatar_default.jpg_100x100.jpg{{?}}" width="100" height="100"/>\n        </div>\n        {{? it.name}}\n          <p class="mu_nav_info_uname">{{= it.name}}</p></a>\n        {{?}}\n    </div>\n    <div class="mu_nav{{? it.orderShowFlag}} mu_expand{{?}}">\n        <div class="mu_title">\u6211\u7684\u8ba2\u5355</div>\n\n        <ul class="mu_nav_item">\n          <li {{? it.status==\'all\' || (it.pathname==\'/order/list4buyer\' && !it.status) && !it.orderVisibleStatusCode }}class="c"{{?}}>\n              <a href="http://order.mogujie.com/order/list4buyer?status=all&_uk={{= it.uk}}">\u5168\u90e8\u8ba2\u5355</a>\n          </li>\n          <li {{? it.status==\'created\' }}class="c"{{?}}>\n            <a href="http://order.mogujie.com/order/list4buyer?status=created&_uk={{= it.uk}}">\n              \u5f85\u4ed8\u6b3e\n              <i id="unpaidOrder" class="mu_nav_count"><i class="mu_nav_count_arw"></i></i>\n            </a>\n          </li>\n          <li {{? it.status==\'unshipped_and_unreceived\' }}class="c"{{?}}>\n            <a href="http://order.mogujie.com/order/list4buyer?status=unshipped_and_unreceived&_uk={{= it.uk}}">\n              \u5f85\u6536\u8d27\n              <i id="unReceivedOrder" class="mu_nav_count"><i class="mu_nav_count_arw"></i></i>\n            </a>\n          </li>\n          <li {{? it.status==\'received_and_completed\' }}class="c"{{?}}>\n            <a href="http://order.mogujie.com/order/list4buyer?status=received_and_completed&_uk={{= it.uk}}">\n              \u5f85\u8bc4\u4ef7\n              <i id="waitingRateOrder" class="mu_nav_count"><i class="mu_nav_count_arw"></i></i>\n            </a>\n          </li>\n          <li {{? it.status==\'refund_orders\' }}class="c"{{?}}>\n            <a href="http://order.mogujie.com/order/list4buyer?status=refund_orders&_uk={{= it.uk}}">\n              \u9000\u8d27\u9000\u6b3e\n              <i class="mu_nav_count"><i class="mu_nav_count_arw"></i></i>\n            </a>\n          </li>\n          <!-- \u65b0\u589e\uff0cstage=8 \u56de\u6536\u7ad9\u8ba2\u5355 -->\n          <li {{? it.orderVisibleStatusCode == \'DELETED\' }}class="c"{{?}}>\n            <a href="http://order.mogujie.com/order/list4buyer?orderVisibleStatusCode=DELETED&_uk={{= it.uk}}">\n              \u8ba2\u5355\u56de\u6536\u7ad9\n              <i id="recyleOrder" class="mu_nav_count"><i class="mu_nav_count_arw"></i></i>\n            </a>\n          </li>\n        </ul>\n    </div>\n    <div class="mu_nav">\n        <div class="mu_title"><a href="https://payuserp.mogujie.com/wallet/home">\u6211\u7684\u94b1\u5305</a></div>\n    </div>\n    <div class="mu_nav">\n        <div class="mu_title"><a href="http://fund.mogujie.com/pay/fund/index">\u6211\u7684\u7406\u8d22</a></div>\n    </div>\n\n    <div class="mu_nav{{? it.couponShowFlag}} mu_expand{{?}}">\n      <div class="mu_title">\u4f18\u60e0\u7279\u6743</div>\n      <ul class="mu_nav_item" id="JCouponList">\n        <li {{? it.pathname==\'/member/member.html\' }}class="c"{{?}}><a href="http://pc.mogujie.com/member/member.html">\u4f1a\u5458\u4e2d\u5fc3</a></li>\n        <!-- <li {{? it.pathname==\'/trade/credit/modouv2/index\' }}class="c"{{?}}><a href="http://www.mogujie.com/trade/credit/modouv2/index">\u6211\u7684\u8611\u8c46</a></li> -->\n      </ul>\n    </div>\n\n    <div class="mu_nav">\n        <div class="mu_title"><a href="http://logistics.mogujie.com/trade/address">\u5730\u5740\u7ba1\u7406</a></div>\n    </div>\n\n    <div class="mu_nav{{? it.safetyShowFlag}} mu_expand{{?}}">\n        <div class="mu_title">\u5b89\u5168\u8bbe\u7f6e</div>\n        <ul class="mu_nav_item">\n          <li {{? it.pathname==\'/trade/safety\' }}class="c"{{?}}><a href="http://portal.mogujie.com/trade/safety">\u8bbe\u7f6e\u5bc6\u7801</a></li>\n          <li {{? it.pathname==\'/user/bindtel\' }}class="c"{{?}}><a href="http://portal.mogujie.com/user/bindtel">\u7ed1\u5b9a\u624b\u673a</a></li>\n          <li {{? it.pathname==\'/security/dc/manage\' }}class="c"{{?}}><a href="http://dcert.mogujie.com/digital_certificate/manage">\u6570\u5b57\u8bc1\u4e66</a></li>\n        </ul>\n    </div>\n\n    <div class="mu_nav{{? it.rightsShowFlag}} mu_expand{{?}}">\n        <div class="mu_title">\u7ef4\u6743\u7ba1\u7406</div>\n        <ul class="mu_nav_item">\n          <li {{? it.pathname==\'/trade/complaint/list\' }}class="c"{{?}}><a href="http://www.mogujie.com/trade/complaint/list">\u6295\u8bc9\u7ba1\u7406</a></li>\n          <li {{? it.pathname==\'/trade/report/list4buyer\' }}class="c"{{?}}><a href="http://www.mogujie.com/trade/report/list4buyer">\u4e3e\u62a5\u7ba1\u7406</a></li>\n        </ul>\n    </div>\n\n    <div class="mu_nav{{? it.settingsShowFlag}} mu_expand{{?}} pb40">\n        <div class="mu_title">\u5e10\u53f7\u8bbe\u7f6e</div>\n        <ul class="mu_nav_item">\n          <li {{? it.pathname==\'/settings/personal\' }}class="c"{{?}}><a href="http://www.mogujie.com/settings/personal">\u57fa\u672c\u4fe1\u606f</a></li>\n          <li {{? it.pathname==\'/settings/avatar\' }}class="c"{{?}}><a href="http://www.mogujie.com/settings/avatar">\u4fee\u6539\u5934\u50cf</a></li>\n        </ul>\n    </div>\n</div>\n'},function(e,a){e.exports=t}])}),"function"==typeof define&&define.amd&&require(["pc/common/leftnav/index"]);require([],function(){function t(t,e){this.init(t,e)}function e(){function t(t){return $.trim(t).replace(/(<|>|'|"|window|alert|eval|$|jQuery)/gi,"")}c.on("keyup keydown",function(a){var n=$(this),i=$("#select_type");if(!i.length||"bao"===i.val()||"5"===i.val())switch(a.keyCode){case 40:if("keyup"==a.type||!r.data("isshow"))break;m.chooseIndex=m.chooseIndex+1>m.tipLength-1?0:++m.chooseIndex;var o=v.changeListTab(m.chooseIndex);c.val(o);break;case 38:if("keyup"==a.type||!r.data("isshow"))break;m.chooseIndex=m.chooseIndex-1<0?m.tipLength-1:--m.chooseIndex;var o=v.changeListTab(m.chooseIndex);c.val(o);break;case 13:if("keyup"==a.type)break;a.preventDefault(),e.submitBefore(m.chooseType,m.chooseIndex),l.submit();break;case 37:break;case 39:break;default:clearTimeout(s),s=setTimeout(function(){var e=t(n.val());v.resetFactory(e)},500)}}).on("focus",function(){var e=$(this),a=$("#select_type");if(s&&clearTimeout(s),!a.length||"bao"===a.val()||"5"===a.val()){var n=t(e.val());clearTimeout(s),s=setTimeout(function(){v.resetFactory(n)},300)}}).on("blur",function(){$("body").bind("click",function(t){$(t.target).parents(".seatch_type_msearch").length||(r.empty().data("isshow",!0).hide(),$("body").unbind("click"))})}),r.on("mouseenter",".search_tip li",function(t){var e=$(this),a=e.index();m.chooseIndex=a,v.changeListTab(a)}).on("click",".search_tip li",function(t){var a=$(this).find(".title").text();$(t.target).hasClass("prop")&&(a+=" "+$(t.target).text()),e.submitBefore(m.chooseType,m.chooseIndex),c.val(a),l.submit()}),r.on("click",".hot_list li",function(){var t=$(this);return e.submitBefore(v.hotTypeName,t.index()),c.val(t.find("span").html()),l.submit(),!1}),r.on("click",".local_del",function(t){var e=$(this),a=e.parent();f.del(a.find(".title").attr("title"));var n=f.getTenItem();return v.updateLocalContent(e,n),m.chooseIndex=-1,m.tipLength=n.length,!1}).on("click",".local_title .del_all",function(){var t=$(this);return f.set(),v.destoryLocalContent(t),t.remove(),m.chooseIndex=-1,m.tipLength=0,!1}),o.on("click",".selectbox a",function(t){t.preventDefault(),v.changeType($(this))}).on("mouseenter",".selectbox",function(){r.hide(),$(this).addClass("sele_hover")}).on("mouseleave",".selectbox",function(){$(this).removeClass("sele_hover")}),l.submit(function(){var a=$(this),n=t(c.val()),i=c.attr("def-v");if(""==n||n==i){if(""==n&&"shop"==$("#select_type").val())return!1;var o=c.data("def");c.val(o||"");var s='<input type="hidden" name="from" value="searchplacehold" id="TJ">';$("#top_nav_form").append(s),setTimeout(function(){$("#TJ").remove()},1e3)}else n==$.trim(c.val())&&"bao"==$("#select_type").val()&&f.addOne(n);if(l.find(".emptyvalue").remove(),a.data("index")>-1&&null!==a.data("type")){var r='<input type="hidden" class="emptyvalue" name="from" value="'+a.data("type")+"querytip"+a.data("index")+'">';l.append(r)}return v.destoryContent(),e.submitAfter(),!1}),v.showStickySearch()&&v.initStickySearch()}var a=MoGu.util&&MoGu.util.getStore&&MoGu.util.getStore(),n=MoGu.ui&&MoGu.ui.getdoT&&MoGu.ui.getdoT();if(n&&a){var i=window.logger&&logger.generatePtpParams("").split("=")[1];$('input[name="ptp"]').val(i);var o=$("#nav_search_form");if(o.length){var s,r=$(".top_search_hint"),c=o.find(".ts_txt"),l=$("#top_nav_form"),h=$("#select_type"),p=o.find(".selectbox"),u="http://search.mogujie.com/jsonp/searchTips/1",d={nowHost:window.location.host,defultHost:"http://search.mogujie.com",template:'<div class="search_tip_box fl">{{=it.searchResult}}</div>',listItemTemp:['<div class="mr300 tip_wrap">','{{ if(it.titleName && it.titleName != ""){ }}','<h3 class="search_tip_title">{{=it.titleName}}</h3>',"{{ }else{ }}","{{ } }}",'<ul class="search_tip">',"{{~it.items :item:index}}","{{ if(index < 10){ }}","<li>",'<a href="{{=item.pcurl}}" class="title" title="{{=item.title}}" >{{=item.title}}</a>',"{{~item.props :prop: i}}",'<a href="{{=prop.pcurl}}" class="prop" title="{{=prop.title}}">{{=prop.title}}</a>',"{{~}}","</li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),localItemTemp:['<div class="mr300 tip_wrap">','<h3 class="search_tip_title local_title clearfix">',"{{ if(it.items.length){ }}",'<span class="del_all">\u5220\u9664</span>',"{{ } }}","\u5386\u53f2\u8bb0\u5f55","</h3>",'<ul class="search_tip">',"{{~it.items :item:index}}","{{ if(index < 10){ }}",'<li class="local_item">','<a href="javascript:;" class="title" title="{{=item}}" >{{=item}}</a>',"{{~item.props :prop: i}}",'<span class="prop">{{= prop }}</span>',"{{~}}",'<span class="nums local_del">x</span>',"</li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),hotKeyTpl:['<div class="search_hot_wrap">','<h3 class="search_tip_title hot_title">\u70ed\u95e8\u5173\u952e\u8bcd</h3>','<ul class="hot_list clearfix">',"{{~it.items :item:index}}","{{ if(index < 10){ }}","<li><span>{{= item.title }}</span></li>","{{ } }}","{{~}}","</ul>","</div>"].join(""),emptyTpl:['<div class="mr300 tip_wrap">','<p class="tip_none">\u6682\u65e0\u76f8\u5173\u70ed\u95e8\u5173\u952e\u8bcd</p>',"</div>"].join("")},f={keyName:"_search_local_history",keyShowName:"_search_local_history_show",maxLength:20,showLength:10,isshow:function(){return!0},abtest:function(t){a.set(this.keyShowName,1)},get:function(){return a.get(this.keyName)||[]},getTenItem:function(){var t=this.get();return t.slice(0,this.showLength)},set:function(t){a.set(this.keyName,t||[])},addOne:function(t){if(t=$.trim(t),""!=t){var e=this.get(),a=$.inArray(t,e);-1==a?(e.unshift(t),e.length>this.maxLength&&e.pop()):(e.splice(a,1),e.unshift(t)),this.set(e)}},del:function(t){t=$.trim(t);var e=this.get(),a=$.inArray(t,e);a>-1&&(e.splice(a,1),this.set(e))}};GetQueryString=function(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)","i"),a=window.location.search.substr(1).match(e);return null!=a?decodeURIComponent(a[2]):""},t.prototype.init=function(t,e){this.chooseIndex=-1,this.chooseType=t,this.tipLength=e||0};var m=new t("undefined"),v={ajaxRequest:null,hotKeyArr:[],isShopHost:function(){return!1},showStickySearch:function(){var t=(location.pathname,$("#body_wrap")),e=t.length>0?t.offset().top:150;return 150>e&&(e=150),"show"==$("#J_searchbar_flag").val()?(this.stickyTargetTop=e,!0):!1},initSearchForm:function(t){var e=l.find(".ts_txt"),a=GetQueryString("q");a&&e.attr("def-v","").val(a),$.ajax({url:"http://search.mogujie.com/jsonp/hotSearchWord/1",dataType:"jsonp",type:"get",success:function(n){if(n&&"SUCCESS"==n.returnCode){var i=n.data,o=i.tips,s=Math.floor(Math.random()*o.length+1)-1,r=o[s],c=i.hots;a||e.attr("def-v",r.info).val(r.info),e.attr("data-def",r.title);var l="";$(c).each(function(t,e){var a=['<a rel="nofollow" class="ts_hotword" href="',"http://list.mogujie.com/s","?q="+e.q,"&from=hotword",'">',e.title,"</a>"].join("");l+=a}),$(".ts_hotwords").html(l)}$.isFunction(t)&&t(n)},fail:function(){}})},resetFactory:function(t){this.isShopHost()?this.resetShopContent(t):f.isshow()?this.resetListContent(t):this.resetOldContent(t)},resetListContent:function(e){function a(t){i(function(){o()})}function i(a){s.ajaxRequest&&s.ajaxRequest.abort();var n=f.getTenItem();return""==$.trim(e)?(c.push(s.renderLocalContent(n)),void($.isFunction(a)&&a())):void(s.ajaxRequest=$.ajax({url:u,dataType:"jsonp",type:"get",data:{keyword:e},success:function(e){if(e&&e.success){var n=e.data.tips.length;0==n?c.push(s.renderEmptyContent()):(c.push(s.renderSearchContent(e.data.tips)),m=new t(s.searchTypeName,n))}$.isFunction(a)&&a()},fail:function(){}}))}function o(){var t=n.template(d.template)({searchResult:c.join("")});r.html(t),s.showContentBox()}var s=this,c=[];a(s.hotKeyArr)},resetShopContent:function(e){function a(a){o.ajaxRequest&&o.ajaxRequest.abort(),o.ajaxRequest=$.ajax({url:u,dataType:"jsonp",type:"get",data:{keyword:e},success:function(e){if(e&&e.success){var n=e.data.tips.length;0==n?s.push(o.renderEmptyContent()):(s.push(o.renderSearchContent(e.data.tips,c)),m=new t(l,n))}$.isFunction(a)&&a()},fail:function(){}})}function i(){var t=n.template(d.template)({searchResult:s.join("")});r.html(t),o.showContentBox()}var o=this,s=[],c="",l=""!=e?o.searchTypeName:o.hotTypeName;a(function(){i()})},resetOldContent:function(e){function a(a){o.ajaxRequest&&o.ajaxRequest.abort(),o.ajaxRequest=$.ajax({url:u,dataType:"jsonp",type:"get",data:{keyword:e},success:function(e){if(e&&e.success){var n=e.data.tips.length;0==n?s.push(o.renderEmptyContent()):(s.push(o.renderSearchContent(e.data.tips,c)),m=new t(l,n))}$.isFunction(a)&&a()},fail:function(){}})}function i(){var t=n.template(d.template)({searchResult:s.join("")});r.html(t),r.find(".tip_wrap").removeClass("mr300").addClass("mr300_fix"),o.showContentBox()}var o=this,s=[],c=""!=e?"\u641c\u7d22\u7ed3\u679c":"\u70ed\u95e8\u5173\u952e\u8bcd",l=""!=e?o.searchTypeName:o.hotTypeName;a(function(){i()})},searchTypeName:"",renderSearchContent:function(t,e){return n.template(d.listItemTemp)({titleName:e||null,items:t})},localTypeName:"local",renderLocalContent:function(t){return n.template(d.localItemTemp)({items:t})},updateLocalContent:function(t,e){var a=t.parent(),n=t.parents(".search_tip");if(a.length&&n.length)if(e.length<f.showLength)a.remove();else{var i=e[f.showLength-1];a.find(".title").attr("title",i).html(i),a.appendTo(n)}},destoryLocalContent:function(t){var e=t.parents(".tip_wrap").find(".search_tip");e.length&&e.empty()},hotTypeName:"default",renderHotContent:function(t){for(var e=[],a=0;a<t.length;a++)e.push({title:t[a]});return n.template(d.hotKeyTpl)({items:e})},renderEmptyContent:function(){return d.emptyTpl},destoryContent:function(){r.empty().hide()},getContentPosition:function(t,e){var a=e.offset(),n=t.data("fixleft"),i=t.data("fixtop");n&&(a.left+=parseInt(n)),i&&(a.top-=parseInt(i));var o=e.width()-34;t.css({left:a.left,top:a.top+e.height()+2,width:o}).addClass("hasposition")},showContentBox:function(){r.show().data("isshow",!0)},changeListTab:function(t){var e=r.find(".search_tip li"),a=e.eq(t);return e.removeClass("checked"),a.addClass("checked"),a.find(".title").text()},changeType:function(t){var e=t.parent(),a=e.attr("data-index"),n=t.text();if(h.val(a),p.find(".selected").text("\u641c"+n),e.siblings("li").removeClass("current"),e.addClass("current"),"shop"==a)c.val()==c.attr("def-v")&&c.val("");else if(""==c.val()){var i=c.attr("def-v");c.val(i)}4==a?"shop.mogujie.com"===d.nowHost?l.attr("action",d.defultHost+"/group/search/"):l.attr("action","/group/search/"):"shop.mogujie.com"===d.nowHost?l.attr("action",d.defultHost+"/search"):"shop"==a?l.attr("action","http://www.mogujie.com/book/search/shop"):l.attr("action",d.defultHost+"/search"),p.removeClass("sele_hover")},initStickySearch:function(){var t=$("#nav_search_form"),e=['<div id="J_sticky_container" class="sticky-search-container">','<div class="wrap">','<a rel="nofollow" href="http://www.mogujie.com" class="logo" title="\u8611\u83c7\u8857|\u6211\u7684\u4e70\u624b\u8857">\u8611\u83c7\u8857|\u6211\u7684\u4e70\u624b\u8857</a>','<div class="sticky-search-content"></div>',"</div>","</div>"].join("");$("body").append(e);var a=$(".sticky-search-container");$(window).off("scroll.sticky").on("scroll.sticky",function(){$(document).scrollTop()>v.stickyTargetTop?a.hasClass("lets-rock")||a.find(".sticky-search-content").append(t).end().addClass("lets-rock"):a.hasClass("lets-rock")&&($(".normal-search-content").append($("#nav_search_form")),a.find(".sticky-search-content").empty().end().removeClass("lets-rock"))})}};e.submitBefore=function(t,e){l.data({type:t,index:e})},e.submitAfter=function(){l.removeData("type index");var t=$.trim(l.find("input[name=t]").val());l.find("input[name=t]").remove(),m.chooseType="undefined",m.chooseIndex=-1;var e=$.map(l.serializeObject(),function(t,e){return[e,encodeURIComponent(t)].join("=")}).join("&"),a="";a="shop"==t?"http://www.mogujie.com/book/search/shop?"+e:"http://list.mogujie.com/s?"+e,logger&&logger.generatePtpParams&&(a=logger.generatePtpParams(a)),window.location.href=a};var y=function(){MoGu.util.inputTextHide(c,"ts_high"),"www.mogujie.com"===d.nowHost||p.parents(".store_header").length||l.attr("action",d.defultHost+"/search"),l.find(".ts_btn").attr("disabled",!1),e()};v.initSearchForm(y)}}});